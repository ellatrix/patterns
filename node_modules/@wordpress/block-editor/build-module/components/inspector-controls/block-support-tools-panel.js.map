{"version":3,"sources":["@wordpress/block-editor/src/components/inspector-controls/block-support-tools-panel.js"],"names":["__experimentalToolsPanel","ToolsPanel","useDispatch","useSelect","useCallback","store","blockEditorStore","cleanEmptyObject","BlockSupportToolsPanel","children","group","label","updateBlockAttributes","getBlockAttributes","getMultiSelectedBlockClientIds","getSelectedBlockClientId","hasMultiSelection","panelId","resetAll","resetFilters","newAttributes","clientIds","forEach","clientId","style","newBlockAttributes","resetFilter"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,wBAAwB,IAAIC,UAArC,QAAuD,uBAAvD;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,iBAAvC;AACA,SAASC,WAAT,QAA4B,oBAA5B;AAEA;AACA;AACA;;AACA,SAASC,KAAK,IAAIC,gBAAlB,QAA0C,aAA1C;AACA,SAASC,gBAAT,QAAiC,mBAAjC;AAEA,eAAe,SAASC,sBAAT,OAA8D;AAAA,MAA7B;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA;AAAnB,GAA6B;AAC5E,QAAM;AAAEC,IAAAA;AAAF,MAA4BV,WAAW,CAAEI,gBAAF,CAA7C;AACA,QAAM;AACLO,IAAAA,kBADK;AAELC,IAAAA,8BAFK;AAGLC,IAAAA,wBAHK;AAILC,IAAAA;AAJK,MAKFb,SAAS,CAAEG,gBAAF,CALb;AAOA,QAAMW,OAAO,GAAGF,wBAAwB,EAAxC;AACA,QAAMG,QAAQ,GAAGd,WAAW,CAC3B,YAAyB;AAAA,QAAvBe,YAAuB,uEAAR,EAAQ;AACxB,UAAMC,aAAa,GAAG,EAAtB;AAEA,UAAMC,SAAS,GAAGL,iBAAiB,KAChCF,8BAA8B,EADE,GAEhC,CAAEG,OAAF,CAFH;AAIAI,IAAAA,SAAS,CAACC,OAAV,CAAqBC,QAAF,IAAgB;AAClC,YAAM;AAAEC,QAAAA;AAAF,UAAYX,kBAAkB,CAAEU,QAAF,CAApC;AACA,UAAIE,kBAAkB,GAAG;AAAED,QAAAA;AAAF,OAAzB;AAEAL,MAAAA,YAAY,CAACG,OAAb,CAAwBI,WAAF,IAAmB;AACxCD,QAAAA,kBAAkB,GAAG,EACpB,GAAGA,kBADiB;AAEpB,aAAGC,WAAW,CAAED,kBAAF;AAFM,SAArB;AAIA,OALD,EAJkC,CAWlC;;AACAA,MAAAA,kBAAkB,GAAG,EACpB,GAAGA,kBADiB;AAEpBD,QAAAA,KAAK,EAAEjB,gBAAgB,CAAEkB,kBAAkB,CAACD,KAArB;AAFH,OAArB;AAKAJ,MAAAA,aAAa,CAAEG,QAAF,CAAb,GAA4BE,kBAA5B;AACA,KAlBD;AAoBAb,IAAAA,qBAAqB,CAAES,SAAF,EAAaD,aAAb,EAA4B,IAA5B,CAArB;AACA,GA7B0B,EA8B3B,CACCP,kBADD,EAECC,8BAFD,EAGCE,iBAHD,EAICC,OAJD,EAKCL,qBALD,CA9B2B,CAA5B;AAuCA,SACC,cAAC,UAAD;AACC,IAAA,SAAS,EAAI,GAAGF,KAAO,sBADxB;AAEC,IAAA,KAAK,EAAGC,KAFT;AAGC,IAAA,QAAQ,EAAGO,QAHZ;AAIC,IAAA,GAAG,EAAGD,OAJP;AAKC,IAAA,OAAO,EAAGA,OALX;AAMC,IAAA,eAAe,EAAG,IANnB;AAOC,IAAA,4BAA4B,EAAG,IAPhC,CAOuC;AAPvC;AAQC,IAAA,mCAAmC,EAAC,OARrC;AASC,IAAA,kCAAkC,EAAC;AATpC,KAWGR,QAXH,CADD;AAeA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __experimentalToolsPanel as ToolsPanel } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { cleanEmptyObject } from '../../hooks/utils';\n\nexport default function BlockSupportToolsPanel( { children, group, label } ) {\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst {\n\t\tgetBlockAttributes,\n\t\tgetMultiSelectedBlockClientIds,\n\t\tgetSelectedBlockClientId,\n\t\thasMultiSelection,\n\t} = useSelect( blockEditorStore );\n\n\tconst panelId = getSelectedBlockClientId();\n\tconst resetAll = useCallback(\n\t\t( resetFilters = [] ) => {\n\t\t\tconst newAttributes = {};\n\n\t\t\tconst clientIds = hasMultiSelection()\n\t\t\t\t? getMultiSelectedBlockClientIds()\n\t\t\t\t: [ panelId ];\n\n\t\t\tclientIds.forEach( ( clientId ) => {\n\t\t\t\tconst { style } = getBlockAttributes( clientId );\n\t\t\t\tlet newBlockAttributes = { style };\n\n\t\t\t\tresetFilters.forEach( ( resetFilter ) => {\n\t\t\t\t\tnewBlockAttributes = {\n\t\t\t\t\t\t...newBlockAttributes,\n\t\t\t\t\t\t...resetFilter( newBlockAttributes ),\n\t\t\t\t\t};\n\t\t\t\t} );\n\n\t\t\t\t// Enforce a cleaned style object.\n\t\t\t\tnewBlockAttributes = {\n\t\t\t\t\t...newBlockAttributes,\n\t\t\t\t\tstyle: cleanEmptyObject( newBlockAttributes.style ),\n\t\t\t\t};\n\n\t\t\t\tnewAttributes[ clientId ] = newBlockAttributes;\n\t\t\t} );\n\n\t\t\tupdateBlockAttributes( clientIds, newAttributes, true );\n\t\t},\n\t\t[\n\t\t\tgetBlockAttributes,\n\t\t\tgetMultiSelectedBlockClientIds,\n\t\t\thasMultiSelection,\n\t\t\tpanelId,\n\t\t\tupdateBlockAttributes,\n\t\t]\n\t);\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tclassName={ `${ group }-block-support-panel` }\n\t\t\tlabel={ label }\n\t\t\tresetAll={ resetAll }\n\t\t\tkey={ panelId }\n\t\t\tpanelId={ panelId }\n\t\t\thasInnerWrapper={ true }\n\t\t\tshouldRenderPlaceholderItems={ true } // Required to maintain fills ordering.\n\t\t\t__experimentalFirstVisibleItemClass=\"first\"\n\t\t\t__experimentalLastVisibleItemClass=\"last\"\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n"]}