{"version":3,"sources":["@wordpress/block-editor/src/components/ungroup-button/index.native.js"],"names":["store","blocksStore","ToolbarGroup","ToolbarButton","__","withSelect","withDispatch","compose","UngroupIcon","blockEditorStore","noop","EMPTY_BLOCKS_LIST","UngroupButton","onConvertFromGroup","isUngroupable","select","getSelectedBlockClientId","getBlock","getGroupingBlockName","selectedId","selectedBlock","groupingBlockName","innerBlocks","length","name","clientId","dispatch","onToggle","replaceBlocks"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,KAAK,IAAIC,WAAlB,QAAqC,mBAArC;AACA,SAASC,YAAT,EAAuBC,aAAvB,QAA4C,uBAA5C;AACA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,iBAAzC;AACA,SAASC,OAAT,QAAwB,oBAAxB;AAEA;AACA;AACA;;AACA,OAAOC,WAAP,MAAwB,QAAxB;AACA,SAASR,KAAK,IAAIS,gBAAlB,QAA0C,aAA1C;;AAEA,MAAMC,IAAI,GAAG,MAAM,CAAE,CAArB;;AACA,MAAMC,iBAAiB,GAAG,EAA1B;AAEA,OAAO,SAASC,aAAT,OAAwE;AAAA,MAAhD;AAAEC,IAAAA,kBAAF;AAAsBC,IAAAA,aAAa,GAAG;AAAtC,GAAgD;;AAC9E,MAAK,CAAEA,aAAP,EAAuB;AACtB,WAAO,IAAP;AACA;;AACD,SACC,cAAC,YAAD,QACC,cAAC,aAAD;AACC,IAAA,KAAK,EAAGV,EAAE,CAAE,SAAF,CADX;AAEC,IAAA,IAAI,EAAGI,WAFR;AAGC,IAAA,OAAO,EAAGK;AAHX,IADD,CADD;AASA;AAED,eAAeN,OAAO,CAAE,CACvBF,UAAU,CAAIU,MAAF,IAAc;AACzB,QAAM;AAAEC,IAAAA,wBAAF;AAA4BC,IAAAA;AAA5B,MACLF,MAAM,CAAEN,gBAAF,CADP;AAGA,QAAM;AAAES,IAAAA;AAAF,MAA2BH,MAAM,CAAEd,WAAF,CAAvC;AAEA,QAAMkB,UAAU,GAAGH,wBAAwB,EAA3C;AACA,QAAMI,aAAa,GAAGH,QAAQ,CAAEE,UAAF,CAA9B;AAEA,QAAME,iBAAiB,GAAGH,oBAAoB,EAA9C;AAEA,QAAMJ,aAAa,GAClBM,aAAa,IACbA,aAAa,CAACE,WADd,IAEAF,aAAa,CAACE,WAAd,CAA0BC,MAA1B,GAAmC,CAFnC,IAGAH,aAAa,CAACI,IAAd,KAAuBH,iBAJxB;AAMA,QAAMC,WAAW,GAAGR,aAAa,GAC9BM,aAAa,CAACE,WADgB,GAE9BX,iBAFH;AAIA,SAAO;AACNG,IAAAA,aADM;AAENW,IAAAA,QAAQ,EAAEN,UAFJ;AAGNG,IAAAA;AAHM,GAAP;AAKA,CA1BS,CADa,EA4BvBhB,YAAY,CAAE,CAAEoB,QAAF,YAA4D;AAAA,MAAhD;AAAED,IAAAA,QAAF;AAAYH,IAAAA,WAAZ;AAAyBK,IAAAA,QAAQ,GAAGjB;AAApC,GAAgD;AACzE,QAAM;AAAEkB,IAAAA;AAAF,MAAoBF,QAAQ,CAAEjB,gBAAF,CAAlC;AAEA,SAAO;AACNI,IAAAA,kBAAkB,GAAG;AACpB,UAAK,CAAES,WAAW,CAACC,MAAnB,EAA4B;AAC3B;AACA;;AAEDK,MAAAA,aAAa,CAAEH,QAAF,EAAYH,WAAZ,CAAb;AAEAK,MAAAA,QAAQ;AACR;;AATK,GAAP;AAWA,CAdW,CA5BW,CAAF,CAAP,CA2CVf,aA3CU,CAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { ToolbarGroup, ToolbarButton } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport UngroupIcon from './icon';\nimport { store as blockEditorStore } from '../../store';\n\nconst noop = () => {};\nconst EMPTY_BLOCKS_LIST = [];\n\nexport function UngroupButton( { onConvertFromGroup, isUngroupable = false } ) {\n\tif ( ! isUngroupable ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\ttitle={ __( 'Ungroup' ) }\n\t\t\t\ticon={ UngroupIcon }\n\t\t\t\tonClick={ onConvertFromGroup }\n\t\t\t/>\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getSelectedBlockClientId, getBlock } =\n\t\t\tselect( blockEditorStore );\n\n\t\tconst { getGroupingBlockName } = select( blocksStore );\n\n\t\tconst selectedId = getSelectedBlockClientId();\n\t\tconst selectedBlock = getBlock( selectedId );\n\n\t\tconst groupingBlockName = getGroupingBlockName();\n\n\t\tconst isUngroupable =\n\t\t\tselectedBlock &&\n\t\t\tselectedBlock.innerBlocks &&\n\t\t\tselectedBlock.innerBlocks.length > 0 &&\n\t\t\tselectedBlock.name === groupingBlockName;\n\n\t\tconst innerBlocks = isUngroupable\n\t\t\t? selectedBlock.innerBlocks\n\t\t\t: EMPTY_BLOCKS_LIST;\n\n\t\treturn {\n\t\t\tisUngroupable,\n\t\t\tclientId: selectedId,\n\t\t\tinnerBlocks,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId, innerBlocks, onToggle = noop } ) => {\n\t\tconst { replaceBlocks } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\tonConvertFromGroup() {\n\t\t\t\tif ( ! innerBlocks.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treplaceBlocks( clientId, innerBlocks );\n\n\t\t\t\tonToggle();\n\t\t\t},\n\t\t};\n\t} ),\n] )( UngroupButton );\n"]}