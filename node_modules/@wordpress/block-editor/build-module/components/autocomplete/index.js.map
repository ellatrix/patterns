{"version":3,"sources":["@wordpress/block-editor/src/components/autocomplete/index.js"],"names":["applyFilters","hasFilter","Autocomplete","__unstableUseAutocompleteProps","useAutocompleteProps","useMemo","getDefaultBlockName","getBlockSupport","useBlockEditContext","blockAutocompleter","linkAutocompleter","EMPTY_ARRAY","useCompleters","completers","name","filteredCompleters","map","completer","useBlockEditorAutocompleteProps","props","BlockEditorAutocomplete"],"mappings":";;;AAAA;AACA;AACA;AACA,SAASA,YAAT,EAAuBC,SAAvB,QAAwC,kBAAxC;AACA,SACCC,YADD,EAECC,8BAA8B,IAAIC,oBAFnC,QAGO,uBAHP;AAIA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,mBAAT,EAA8BC,eAA9B,QAAqD,mBAArD;AAEA;AACA;AACA;;AACA,SAASC,mBAAT,QAAoC,uBAApC;AACA,OAAOC,kBAAP,MAA+B,4BAA/B;AACA,OAAOC,iBAAP,MAA8B,2BAA9B;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,WAAW,GAAG,EAApB;;AAEA,SAASC,aAAT,OAAuD;AAAA,MAA/B;AAAEC,IAAAA,UAAU,GAAGF;AAAf,GAA+B;AACtD,QAAM;AAAEG,IAAAA;AAAF,MAAWN,mBAAmB,EAApC;AACA,SAAOH,OAAO,CAAE,MAAM;AACrB,QAAIU,kBAAkB,GAAG,CAAE,GAAGF,UAAL,EAAiBH,iBAAjB,CAAzB;;AAEA,QACCI,IAAI,KAAKR,mBAAmB,EAA5B,IACAC,eAAe,CAAEO,IAAF,EAAQ,6BAAR,EAAuC,KAAvC,CAFhB,EAGE;AACDC,MAAAA,kBAAkB,GAAG,CAAE,GAAGA,kBAAL,EAAyBN,kBAAzB,CAArB;AACA;;AAED,QAAKR,SAAS,CAAE,gCAAF,CAAd,EAAqD;AACpD;AACA,UAAKc,kBAAkB,KAAKF,UAA5B,EAAyC;AACxCE,QAAAA,kBAAkB,GAAGA,kBAAkB,CAACC,GAAnB,CAClBC,SAAF,KAAmB,EAAE,GAAGA;AAAL,SAAnB,CADoB,CAArB;AAGA;;AAEDF,MAAAA,kBAAkB,GAAGf,YAAY,CAChC,gCADgC,EAEhCe,kBAFgC,EAGhCD,IAHgC,CAAjC;AAKA;;AAED,WAAOC,kBAAP;AACA,GA1Ba,EA0BX,CAAEF,UAAF,EAAcC,IAAd,CA1BW,CAAd;AA2BA;;AAED,OAAO,SAASI,+BAAT,CAA0CC,KAA1C,EAAkD;AACxD,SAAOf,oBAAoB,CAAE,EAC5B,GAAGe,KADyB;AAE5BN,IAAAA,UAAU,EAAED,aAAa,CAAEO,KAAF;AAFG,GAAF,CAA3B;AAIA;AAED;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,uBAAT,CAAkCD,KAAlC,EAA0C;AACzC,SAAO,cAAC,YAAD,eAAmBA,KAAnB;AAA2B,IAAA,UAAU,EAAGP,aAAa,CAAEO,KAAF;AAArD,KAAP;AACA;AAED;AACA;AACA;;;AACA,eAAeC,uBAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { applyFilters, hasFilter } from '@wordpress/hooks';\nimport {\n\tAutocomplete,\n\t__unstableUseAutocompleteProps as useAutocompleteProps,\n} from '@wordpress/components';\nimport { useMemo } from '@wordpress/element';\nimport { getDefaultBlockName, getBlockSupport } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit/context';\nimport blockAutocompleter from '../../autocompleters/block';\nimport linkAutocompleter from '../../autocompleters/link';\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\nfunction useCompleters( { completers = EMPTY_ARRAY } ) {\n\tconst { name } = useBlockEditContext();\n\treturn useMemo( () => {\n\t\tlet filteredCompleters = [ ...completers, linkAutocompleter ];\n\n\t\tif (\n\t\t\tname === getDefaultBlockName() ||\n\t\t\tgetBlockSupport( name, '__experimentalSlashInserter', false )\n\t\t) {\n\t\t\tfilteredCompleters = [ ...filteredCompleters, blockAutocompleter ];\n\t\t}\n\n\t\tif ( hasFilter( 'editor.Autocomplete.completers' ) ) {\n\t\t\t// Provide copies so filters may directly modify them.\n\t\t\tif ( filteredCompleters === completers ) {\n\t\t\t\tfilteredCompleters = filteredCompleters.map(\n\t\t\t\t\t( completer ) => ( { ...completer } )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfilteredCompleters = applyFilters(\n\t\t\t\t'editor.Autocomplete.completers',\n\t\t\t\tfilteredCompleters,\n\t\t\t\tname\n\t\t\t);\n\t\t}\n\n\t\treturn filteredCompleters;\n\t}, [ completers, name ] );\n}\n\nexport function useBlockEditorAutocompleteProps( props ) {\n\treturn useAutocompleteProps( {\n\t\t...props,\n\t\tcompleters: useCompleters( props ),\n\t} );\n}\n\n/**\n * Wrap the default Autocomplete component with one that supports a filter hook\n * for customizing its list of autocompleters.\n *\n * @type {import('react').FC}\n */\nfunction BlockEditorAutocomplete( props ) {\n\treturn <Autocomplete { ...props } completers={ useCompleters( props ) } />;\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/autocomplete/README.md\n */\nexport default BlockEditorAutocomplete;\n"]}