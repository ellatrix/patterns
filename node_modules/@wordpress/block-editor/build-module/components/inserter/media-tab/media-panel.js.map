{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/media-tab/media-panel.js"],"names":["useRef","useEffect","Spinner","SearchControl","focus","__","MediaList","useDebouncedInput","useMediaResults","InserterNoResults","INITIAL_MEDIA_ITEMS_PER_PAGE","MediaCategoryDialog","rootClientId","onInsert","category","container","timeout","setTimeout","firstTabbable","tabbable","find","current","clearTimeout","MediaCategoryPanel","search","setSearch","debouncedSearch","mediaList","isLoading","per_page","baseCssClass","searchLabel","labels","search_items","length"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,MAAT,EAAiBC,SAAjB,QAAkC,oBAAlC;AACA,SAASC,OAAT,EAAkBC,aAAlB,QAAuC,uBAAvC;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,EAAT,QAAmB,iBAAnB;AAEA;AACA;AACA;;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,iBAAP,MAA8B,8BAA9B;AACA,SAASC,eAAT,QAAgC,SAAhC;AACA,OAAOC,iBAAP,MAA8B,eAA9B;AAEA,MAAMC,4BAA4B,GAAG,EAArC;AAEA,OAAO,SAASC,mBAAT,OAAqE;AAAA,MAAvC;AAAEC,IAAAA,YAAF;AAAgBC,IAAAA,QAAhB;AAA0BC,IAAAA;AAA1B,GAAuC;AAC3E,QAAMC,SAAS,GAAGf,MAAM,EAAxB;AACAC,EAAAA,SAAS,CAAE,MAAM;AAChB,UAAMe,OAAO,GAAGC,UAAU,CAAE,MAAM;AACjC,YAAM,CAAEC,aAAF,IAAoBd,KAAK,CAACe,QAAN,CAAeC,IAAf,CAAqBL,SAAS,CAACM,OAA/B,CAA1B;AACAH,MAAAA,aAAa,SAAb,IAAAA,aAAa,WAAb,YAAAA,aAAa,CAAEd,KAAf;AACA,KAHyB,CAA1B;AAIA,WAAO,MAAMkB,YAAY,CAAEN,OAAF,CAAzB;AACA,GANQ,EAMN,CAAEF,QAAF,CANM,CAAT;AAOA,SACC;AAAK,IAAA,GAAG,EAAGC,SAAX;AAAuB,IAAA,SAAS,EAAC;AAAjC,KACC,cAAC,kBAAD;AACC,IAAA,YAAY,EAAGH,YADhB;AAEC,IAAA,QAAQ,EAAGC,QAFZ;AAGC,IAAA,QAAQ,EAAGC;AAHZ,IADD,CADD;AASA;AAED,OAAO,SAASS,kBAAT,QAAoE;AAAA,MAAvC;AAAEX,IAAAA,YAAF;AAAgBC,IAAAA,QAAhB;AAA0BC,IAAAA;AAA1B,GAAuC;AAC1E,QAAM,CAAEU,MAAF,EAAUC,SAAV,EAAqBC,eAArB,IAAyCnB,iBAAiB,EAAhE;AACA,QAAM;AAAEoB,IAAAA,SAAF;AAAaC,IAAAA;AAAb,MAA2BpB,eAAe,CAAEM,QAAF,EAAY;AAC3De,IAAAA,QAAQ,EAAE,CAAC,CAAEH,eAAH,GAAqB,EAArB,GAA0BhB,4BADuB;AAE3Dc,IAAAA,MAAM,EAAEE;AAFmD,GAAZ,CAAhD;AAIA,QAAMI,YAAY,GAAG,oCAArB;;AACA,QAAMC,WAAW,GAAGjB,QAAQ,CAACkB,MAAT,CAAgBC,YAAhB,IAAgC5B,EAAE,CAAE,QAAF,CAAtD;;AACA,SACC;AAAK,IAAA,SAAS,EAAGyB;AAAjB,KACC,cAAC,aAAD;AACC,IAAA,SAAS,EAAI,GAAGA,YAAc,SAD/B;AAEC,IAAA,QAAQ,EAAGL,SAFZ;AAGC,IAAA,KAAK,EAAGD,MAHT;AAIC,IAAA,KAAK,EAAGO,WAJT;AAKC,IAAA,WAAW,EAAGA;AALf,IADD,EAQGH,SAAS,IACV;AAAK,IAAA,SAAS,EAAI,GAAGE,YAAc;AAAnC,KACC,cAAC,OAAD,OADD,CATF,EAaG,CAAEF,SAAF,IAAe,EAAED,SAAF,aAAEA,SAAF,eAAEA,SAAS,CAAEO,MAAb,CAAf,IAAsC,cAAC,iBAAD,OAbzC,EAcG,CAAEN,SAAF,IAAe,CAAC,EAAED,SAAF,aAAEA,SAAF,eAAEA,SAAS,CAAEO,MAAb,CAAhB,IACD,cAAC,SAAD;AACC,IAAA,YAAY,EAAGtB,YADhB;AAEC,IAAA,OAAO,EAAGC,QAFX;AAGC,IAAA,SAAS,EAAGc,SAHb;AAIC,IAAA,QAAQ,EAAGb;AAJZ,IAfF,CADD;AAyBA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\nimport { Spinner, SearchControl } from '@wordpress/components';\nimport { focus } from '@wordpress/dom';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport MediaList from './media-list';\nimport useDebouncedInput from '../hooks/use-debounced-input';\nimport { useMediaResults } from './hooks';\nimport InserterNoResults from '../no-results';\n\nconst INITIAL_MEDIA_ITEMS_PER_PAGE = 10;\n\nexport function MediaCategoryDialog( { rootClientId, onInsert, category } ) {\n\tconst container = useRef();\n\tuseEffect( () => {\n\t\tconst timeout = setTimeout( () => {\n\t\t\tconst [ firstTabbable ] = focus.tabbable.find( container.current );\n\t\t\tfirstTabbable?.focus();\n\t\t} );\n\t\treturn () => clearTimeout( timeout );\n\t}, [ category ] );\n\treturn (\n\t\t<div ref={ container } className=\"block-editor-inserter__media-dialog\">\n\t\t\t<MediaCategoryPanel\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t\tcategory={ category }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport function MediaCategoryPanel( { rootClientId, onInsert, category } ) {\n\tconst [ search, setSearch, debouncedSearch ] = useDebouncedInput();\n\tconst { mediaList, isLoading } = useMediaResults( category, {\n\t\tper_page: !! debouncedSearch ? 20 : INITIAL_MEDIA_ITEMS_PER_PAGE,\n\t\tsearch: debouncedSearch,\n\t} );\n\tconst baseCssClass = 'block-editor-inserter__media-panel';\n\tconst searchLabel = category.labels.search_items || __( 'Search' );\n\treturn (\n\t\t<div className={ baseCssClass }>\n\t\t\t<SearchControl\n\t\t\t\tclassName={ `${ baseCssClass }-search` }\n\t\t\t\tonChange={ setSearch }\n\t\t\t\tvalue={ search }\n\t\t\t\tlabel={ searchLabel }\n\t\t\t\tplaceholder={ searchLabel }\n\t\t\t/>\n\t\t\t{ isLoading && (\n\t\t\t\t<div className={ `${ baseCssClass }-spinner` }>\n\t\t\t\t\t<Spinner />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ ! isLoading && ! mediaList?.length && <InserterNoResults /> }\n\t\t\t{ ! isLoading && !! mediaList?.length && (\n\t\t\t\t<MediaList\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tonClick={ onInsert }\n\t\t\t\t\tmediaList={ mediaList }\n\t\t\t\t\tcategory={ category }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n"]}