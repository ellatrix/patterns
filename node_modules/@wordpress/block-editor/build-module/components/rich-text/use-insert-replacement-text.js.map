{"version":3,"sources":["@wordpress/block-editor/src/components/rich-text/use-insert-replacement-text.js"],"names":["useRefEffect","useDispatch","store","blockEditorStore","useInsertReplacementText","__unstableMarkLastChangeAsPersistent","element","onInput","event","inputType","addEventListener","removeEventListener"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAT,QAA6B,oBAA7B;AACA,SAASC,WAAT,QAA4B,iBAA5B;AAEA;AACA;AACA;;AACA,SAASC,KAAK,IAAIC,gBAAlB,QAA0C,aAA1C;AAEA;AACA;AACA;AACA;;AACA,OAAO,SAASC,wBAAT,GAAoC;AAC1C,QAAM;AAAEC,IAAAA;AAAF,MACLJ,WAAW,CAAEE,gBAAF,CADZ;AAEA,SAAOH,YAAY,CAAIM,OAAF,IAAe;AACnC,aAASC,OAAT,CAAkBC,KAAlB,EAA0B;AACzB,UAAKA,KAAK,CAACC,SAAN,KAAoB,uBAAzB,EAAmD;AAClDJ,QAAAA,oCAAoC;AACpC;AACD;;AAEDC,IAAAA,OAAO,CAACI,gBAAR,CAA0B,aAA1B,EAAyCH,OAAzC;AACA,WAAO,MAAM;AACZD,MAAAA,OAAO,CAACK,mBAAR,CAA6B,aAA7B,EAA4CJ,OAA5C;AACA,KAFD;AAGA,GAXkB,EAWhB,EAXgB,CAAnB;AAYA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * When the browser is about to auto correct, add an undo level so the user can\n * revert the change.\n */\nexport function useInsertReplacementText() {\n\tconst { __unstableMarkLastChangeAsPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onInput( event ) {\n\t\t\tif ( event.inputType === 'insertReplacementText' ) {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'beforeinput', onInput );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'beforeinput', onInput );\n\t\t};\n\t}, [] );\n}\n"]}