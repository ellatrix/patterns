{"version":3,"sources":["@wordpress/block-editor/src/components/block-actions/index.js"],"names":["BlockActions","clientIds","children","__experimentalUpdateSelection","updateSelection","canInsertBlockType","getBlockRootClientId","getBlocksByClientId","canMoveBlocks","canRemoveBlocks","blockEditorStore","getDefaultBlockName","getGroupingBlockName","blocksStore","blocks","rootClientId","canDuplicate","every","block","name","canInsertDefaultBlock","canMove","canRemove","removeBlocks","replaceBlocks","duplicateBlocks","insertAfterBlock","insertBeforeBlock","flashBlock","setBlockMovingClientId","setNavigationMode","selectBlock","notifyCopy","pasteStyles","onDuplicate","onRemove","onInsertBefore","clientId","Array","isArray","onInsertAfter","length","onMoveTo","onGroup","groupingBlockName","newBlocks","onUngroup","innerBlocks","onCopy","selectedBlockClientIds","map","onPasteStyles"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\thasBlockSupport,\n\tswitchToBlockType,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { useNotifyCopy } from '../copy-handler';\nimport usePasteStyles from '../use-paste-styles';\nimport { store as blockEditorStore } from '../../store';\n\nexport default function BlockActions( {\n\tclientIds,\n\tchildren,\n\t__experimentalUpdateSelection: updateSelection,\n} ) {\n\tconst {\n\t\tcanInsertBlockType,\n\t\tgetBlockRootClientId,\n\t\tgetBlocksByClientId,\n\t\tcanMoveBlocks,\n\t\tcanRemoveBlocks,\n\t} = useSelect( blockEditorStore );\n\tconst { getDefaultBlockName, getGroupingBlockName } =\n\t\tuseSelect( blocksStore );\n\n\tconst blocks = getBlocksByClientId( clientIds );\n\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\tconst canDuplicate = blocks.every( ( block ) => {\n\t\treturn (\n\t\t\t!! block &&\n\t\t\thasBlockSupport( block.name, 'multiple', true ) &&\n\t\t\tcanInsertBlockType( block.name, rootClientId )\n\t\t);\n\t} );\n\n\tconst canInsertDefaultBlock = canInsertBlockType(\n\t\tgetDefaultBlockName(),\n\t\trootClientId\n\t);\n\n\tconst canMove = canMoveBlocks( clientIds, rootClientId );\n\tconst canRemove = canRemoveBlocks( clientIds, rootClientId );\n\n\tconst {\n\t\tremoveBlocks,\n\t\treplaceBlocks,\n\t\tduplicateBlocks,\n\t\tinsertAfterBlock,\n\t\tinsertBeforeBlock,\n\t\tflashBlock,\n\t\tsetBlockMovingClientId,\n\t\tsetNavigationMode,\n\t\tselectBlock,\n\t} = useDispatch( blockEditorStore );\n\n\tconst notifyCopy = useNotifyCopy();\n\tconst pasteStyles = usePasteStyles();\n\n\treturn children( {\n\t\tcanDuplicate,\n\t\tcanInsertDefaultBlock,\n\t\tcanMove,\n\t\tcanRemove,\n\t\trootClientId,\n\t\tblocks,\n\t\tonDuplicate() {\n\t\t\treturn duplicateBlocks( clientIds, updateSelection );\n\t\t},\n\t\tonRemove() {\n\t\t\treturn removeBlocks( clientIds, updateSelection );\n\t\t},\n\t\tonInsertBefore() {\n\t\t\tconst clientId = Array.isArray( clientIds )\n\t\t\t\t? clientIds[ 0 ]\n\t\t\t\t: clientId;\n\t\t\tinsertBeforeBlock( clientId );\n\t\t},\n\t\tonInsertAfter() {\n\t\t\tconst clientId = Array.isArray( clientIds )\n\t\t\t\t? clientIds[ clientIds.length - 1 ]\n\t\t\t\t: clientId;\n\t\t\tinsertAfterBlock( clientId );\n\t\t},\n\t\tonMoveTo() {\n\t\t\tsetNavigationMode( true );\n\t\t\tselectBlock( clientIds[ 0 ] );\n\t\t\tsetBlockMovingClientId( clientIds[ 0 ] );\n\t\t},\n\t\tonGroup() {\n\t\t\tif ( ! blocks.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst groupingBlockName = getGroupingBlockName();\n\n\t\t\t// Activate the `transform` on `core/group` which does the conversion.\n\t\t\tconst newBlocks = switchToBlockType( blocks, groupingBlockName );\n\n\t\t\tif ( ! newBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t},\n\t\tonUngroup() {\n\t\t\tif ( ! blocks.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst innerBlocks = blocks[ 0 ].innerBlocks;\n\n\t\t\tif ( ! innerBlocks.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treplaceBlocks( clientIds, innerBlocks );\n\t\t},\n\t\tonCopy() {\n\t\t\tconst selectedBlockClientIds = blocks.map(\n\t\t\t\t( { clientId } ) => clientId\n\t\t\t);\n\t\t\tif ( blocks.length === 1 ) {\n\t\t\t\tflashBlock( selectedBlockClientIds[ 0 ] );\n\t\t\t}\n\t\t\tnotifyCopy( 'copy', selectedBlockClientIds );\n\t\t},\n\t\tasync onPasteStyles() {\n\t\t\tawait pasteStyles( blocks );\n\t\t},\n\t} );\n}\n"]}