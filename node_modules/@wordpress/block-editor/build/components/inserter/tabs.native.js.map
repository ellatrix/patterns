{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/tabs.native.js"],"names":["TAB_ANIMATION_DURATION","InserterTabs","listProps","onSelect","rootClientId","showReusableBlocks","tabIndex","tabAnimation","Animated","Value","current","lastScrollEvents","wrapperWidth","setWrapperWidth","onScroll","event","nativeEvent","onWrapperLayout","layout","width","timing","duration","toValue","useNativeDriver","start","lastScrollEvent","tabs","tabKeys","filteredTabs","getTabs","filter","name","keys","translateX","length","interpolate","inputRange","outputRange","map","key","containerStyle","styles","transform","index","component","TabComponent","TabsControl","onChangeTab","segments","title","segmentHandler","selectedTab","tabTitles","indexOf","Control","BlockTypesTab","ReusableBlocksTab"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { Animated, View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseCallback,\n\tuseEffect,\n\tuseMemo,\n\tuseRef,\n\tuseState,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { SegmentedControl } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesTab from './block-types-tab';\nimport ReusableBlocksTab from './reusable-blocks-tab';\nimport styles from './style.scss';\n\nconst TAB_ANIMATION_DURATION = 250;\n\nfunction InserterTabs( {\n\tlistProps,\n\tonSelect,\n\trootClientId,\n\tshowReusableBlocks,\n\ttabIndex,\n} ) {\n\tconst tabAnimation = useRef( new Animated.Value( 0 ) ).current;\n\tconst lastScrollEvents = useRef( [] ).current;\n\tconst [ wrapperWidth, setWrapperWidth ] = useState( 0 );\n\n\tfunction onScroll( event ) {\n\t\tlastScrollEvents[ tabIndex ] = event.nativeEvent;\n\t\tlistProps.onScroll( event );\n\t}\n\n\tconst onWrapperLayout = useCallback(\n\t\t( { nativeEvent } ) => {\n\t\t\tsetWrapperWidth( nativeEvent.layout.width );\n\t\t},\n\t\t[ setWrapperWidth ]\n\t);\n\n\tuseEffect( () => {\n\t\tAnimated.timing( tabAnimation, {\n\t\t\tduration: TAB_ANIMATION_DURATION,\n\t\t\ttoValue: tabIndex,\n\t\t\tuseNativeDriver: true,\n\t\t} ).start();\n\n\t\t// Notify upstream with the last scroll event of the current tab.\n\t\tconst lastScrollEvent = lastScrollEvents[ tabIndex ];\n\t\tif ( lastScrollEvent ) {\n\t\t\tlistProps.onScroll( { nativeEvent: lastScrollEvent } );\n\t\t}\n\t}, [ tabIndex ] );\n\n\tconst { tabs, tabKeys } = useMemo( () => {\n\t\tconst filteredTabs = InserterTabs.getTabs().filter(\n\t\t\t( { name } ) => showReusableBlocks || name !== 'reusable'\n\t\t);\n\t\treturn {\n\t\t\ttabs: filteredTabs,\n\t\t\ttabKeys: [ ...filteredTabs.keys() ],\n\t\t};\n\t}, [ showReusableBlocks ] );\n\n\tconst translateX = useMemo(\n\t\t() =>\n\t\t\ttabKeys.length > 1\n\t\t\t\t? tabAnimation.interpolate( {\n\t\t\t\t\t\tinputRange: tabKeys,\n\t\t\t\t\t\toutputRange: tabKeys.map(\n\t\t\t\t\t\t\t( key ) => key * -wrapperWidth\n\t\t\t\t\t\t),\n\t\t\t\t  } )\n\t\t\t\t: tabAnimation,\n\t\t[ tabAnimation, tabKeys, wrapperWidth ]\n\t);\n\n\tconst containerStyle = [\n\t\tstyles[ 'inserter-tabs__container' ],\n\t\t{\n\t\t\twidth: wrapperWidth * tabKeys.length,\n\t\t\ttransform: [ { translateX } ],\n\t\t},\n\t];\n\n\treturn (\n\t\t<View\n\t\t\tstyle={ styles[ 'inserter-tabs__wrapper' ] }\n\t\t\tonLayout={ onWrapperLayout }\n\t\t>\n\t\t\t<Animated.View style={ containerStyle }>\n\t\t\t\t{ tabs.map( ( { component: TabComponent }, index ) => (\n\t\t\t\t\t<View key={ `tab-${ index }` }>\n\t\t\t\t\t\t<TabComponent\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t\tlistProps={ { ...listProps, onScroll } }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) ) }\n\t\t\t</Animated.View>\n\t\t</View>\n\t);\n}\n\nfunction TabsControl( { onChangeTab, showReusableBlocks } ) {\n\tconst tabs = InserterTabs.getTabs();\n\tconst segments = useMemo( () => {\n\t\tconst filteredTabs = tabs.filter(\n\t\t\t( { name } ) => showReusableBlocks || name !== 'reusable'\n\t\t);\n\t\treturn filteredTabs.map( ( { title } ) => title );\n\t}, [ showReusableBlocks ] );\n\n\tconst segmentHandler = useCallback(\n\t\t( selectedTab ) => {\n\t\t\tconst tabTitles = tabs.map( ( { title } ) => title );\n\t\t\tonChangeTab( tabTitles.indexOf( selectedTab ) );\n\t\t},\n\t\t[ onChangeTab ]\n\t);\n\n\treturn segments.length > 1 ? (\n\t\t<SegmentedControl\n\t\t\tsegments={ segments }\n\t\t\tsegmentHandler={ segmentHandler }\n\t\t/>\n\t) : null;\n}\n\nInserterTabs.Control = TabsControl;\n\nInserterTabs.getTabs = () => [\n\t{ name: 'blocks', title: __( 'Blocks' ), component: BlockTypesTab },\n\t{ name: 'reusable', title: __( 'Reusable' ), component: ReusableBlocksTab },\n];\n\nexport default InserterTabs;\n"]}