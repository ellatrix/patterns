{"version":3,"sources":["@wordpress/viewport/src/listener.native.js"],"names":["Dimensions","dispatch","store","matchWidth","operator","breakpoint","width","get","Error","addDimensionsEventListener","breakpoints","operators","operatorEntries","Object","entries","breakpointEntries","setIsMatching","matches","fromEntries","flatMap","name","map","condition","addEventListener"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,UAAT,QAA2B,cAA3B;AAEA;AACA;AACA;;AACA,SAASC,QAAT,QAAyB,iBAAzB;AAEA;AACA;AACA;;AACA,SAASC,KAAT,QAAsB,SAAtB;;AAEA,MAAMC,UAAU,GAAG,CAAEC,QAAF,EAAYC,UAAZ,KAA4B;AAC9C,QAAM;AAAEC,IAAAA;AAAF,MAAYN,UAAU,CAACO,GAAX,CAAgB,QAAhB,CAAlB;;AACA,MAAKH,QAAQ,KAAK,WAAlB,EAAgC;AAC/B,WAAOE,KAAK,GAAGD,UAAf;AACA,GAFD,MAEO,IAAKD,QAAQ,KAAK,WAAlB,EAAgC;AACtC,WAAOE,KAAK,IAAID,UAAhB;AACA;;AACD,QAAM,IAAIG,KAAJ,CAAY,kCAAkCJ,QAAU,EAAxD,CAAN;AACA,CARD;;AAUA,MAAMK,0BAA0B,GAAG,CAAEC,WAAF,EAAeC,SAAf,KAA8B;AAChE,QAAMC,eAAe,GAAGC,MAAM,CAACC,OAAP,CAAgBH,SAAhB,CAAxB;AACA,QAAMI,iBAAiB,GAAGF,MAAM,CAACC,OAAP,CAAgBJ,WAAhB,CAA1B;;AAEA,QAAMM,aAAa,GAAG,MAAM;AAC3B,UAAMC,OAAO,GAAGJ,MAAM,CAACK,WAAP,CACfH,iBAAiB,CAACI,OAAlB,CAA2B,QAAuB;AAAA,UAArB,CAAEC,IAAF,EAAQd,KAAR,CAAqB;AACjD,aAAOM,eAAe,CAACS,GAAhB,CAAqB;AAAA,YAAE,CAAEjB,QAAF,EAAYkB,SAAZ,CAAF;AAAA,eAA+B,CACzD,GAAGlB,QAAU,IAAIgB,IAAM,EADkC,EAE1DjB,UAAU,CAAEmB,SAAF,EAAahB,KAAb,CAFgD,CAA/B;AAAA,OAArB,CAAP;AAIA,KALD,CADe,CAAhB;AASAL,IAAAA,QAAQ,CAAEC,KAAF,CAAR,CAAkBc,aAAlB,CAAiCC,OAAjC;AACA,GAXD;;AAaAjB,EAAAA,UAAU,CAACuB,gBAAX,CAA6B,QAA7B,EAAuCP,aAAvC,EAjBgE,CAmBhE;;AACAA,EAAAA,aAAa;AACb,CArBD;;AAuBA,eAAeP,0BAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { Dimensions } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { dispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store } from './store';\n\nconst matchWidth = ( operator, breakpoint ) => {\n\tconst { width } = Dimensions.get( 'window' );\n\tif ( operator === 'max-width' ) {\n\t\treturn width < breakpoint;\n\t} else if ( operator === 'min-width' ) {\n\t\treturn width >= breakpoint;\n\t}\n\tthrow new Error( `Unsupported viewport operator: ${ operator }` );\n};\n\nconst addDimensionsEventListener = ( breakpoints, operators ) => {\n\tconst operatorEntries = Object.entries( operators );\n\tconst breakpointEntries = Object.entries( breakpoints );\n\n\tconst setIsMatching = () => {\n\t\tconst matches = Object.fromEntries(\n\t\t\tbreakpointEntries.flatMap( ( [ name, width ] ) => {\n\t\t\t\treturn operatorEntries.map( ( [ operator, condition ] ) => [\n\t\t\t\t\t`${ operator } ${ name }`,\n\t\t\t\t\tmatchWidth( condition, width ),\n\t\t\t\t] );\n\t\t\t} )\n\t\t);\n\n\t\tdispatch( store ).setIsMatching( matches );\n\t};\n\n\tDimensions.addEventListener( 'change', setIsMatching );\n\n\t// Set initial values.\n\tsetIsMatching();\n};\n\nexport default addDimensionsEventListener;\n"]}