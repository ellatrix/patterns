{"version":3,"sources":["@wordpress/block-library/src/missing/edit.js"],"names":["MissingBlockWarning","attributes","convertToHTML","clientId","originalName","originalUndelimitedContent","hasContent","hasHTMLBlock","select","canInsertBlockType","getBlockRootClientId","blockEditorStore","actions","messageHTML","push","className","MissingEdit","dispatch","replaceBlock","content"],"mappings":";;;;;;;AAIA;;AADA;;AAEA;;AACA;;AACA;;AACA;;AAKA;;AAbA;AACA;AACA;AAaA,SAASA,mBAAT,OAAwE;AAAA,MAA1C;AAAEC,IAAAA,UAAF;AAAcC,IAAAA,aAAd;AAA6BC,IAAAA;AAA7B,GAA0C;AACvE,QAAM;AAAEC,IAAAA,YAAF;AAAgBC,IAAAA;AAAhB,MAA+CJ,UAArD;AACA,QAAMK,UAAU,GAAG,CAAC,CAAED,0BAAtB;AACA,QAAME,YAAY,GAAG,qBAClBC,MAAF,IAAc;AACb,UAAM;AAAEC,MAAAA,kBAAF;AAAsBC,MAAAA;AAAtB,QACLF,MAAM,CAAEG,kBAAF,CADP;AAGA,WAAOF,kBAAkB,CACxB,WADwB,EAExBC,oBAAoB,CAAEP,QAAF,CAFI,CAAzB;AAIA,GATmB,EAUpB,CAAEA,QAAF,CAVoB,CAArB;AAaA,QAAMS,OAAO,GAAG,EAAhB;AACA,MAAIC,WAAJ;;AACA,MAAKP,UAAU,IAAIC,YAAnB,EAAkC;AACjCM,IAAAA,WAAW,GAAG;AACb;AACA,kBACC,2JADD,CAFa,EAKbT,YALa,CAAd;AAOAQ,IAAAA,OAAO,CAACE,IAAR,CACC,4BAAC,kBAAD;AAAQ,MAAA,GAAG,EAAC,SAAZ;AAAsB,MAAA,OAAO,EAAGZ,aAAhC;AAAgD,MAAA,OAAO,EAAC;AAAxD,OACG,cAAI,cAAJ,CADH,CADD;AAKA,GAbD,MAaO;AACNW,IAAAA,WAAW,GAAG;AACb;AACA,kBACC,8GADD,CAFa,EAKbT,YALa,CAAd;AAOA;;AAED,SACC,mCAAU,gCAAe;AAAEW,IAAAA,SAAS,EAAE;AAAb,GAAf,CAAV,EACC,4BAAC,oBAAD;AAAS,IAAA,OAAO,EAAGH;AAAnB,KAA+BC,WAA/B,CADD,EAEC,4BAAC,gBAAD,QAAW,mBAAUR,0BAAV,CAAX,CAFD,CADD;AAMA;;AAED,MAAMW,WAAW,GAAG,wBAAc,CAAEC,QAAF,YAA0C;AAAA,MAA9B;AAAEd,IAAAA,QAAF;AAAYF,IAAAA;AAAZ,GAA8B;AAC3E,QAAM;AAAEiB,IAAAA;AAAF,MAAmBD,QAAQ,CAAEN,kBAAF,CAAjC;AACA,SAAO;AACNT,IAAAA,aAAa,GAAG;AACfgB,MAAAA,YAAY,CACXf,QADW,EAEX,yBAAa,WAAb,EAA0B;AACzBgB,QAAAA,OAAO,EAAElB,UAAU,CAACI;AADK,OAA1B,CAFW,CAAZ;AAMA;;AARK,GAAP;AAUA,CAZmB,EAYfL,mBAZe,CAApB;eAcegB,W","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { RawHTML } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport { createBlock } from '@wordpress/blocks';\nimport { withDispatch, useSelect } from '@wordpress/data';\nimport {\n\tWarning,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { safeHTML } from '@wordpress/dom';\n\nfunction MissingBlockWarning( { attributes, convertToHTML, clientId } ) {\n\tconst { originalName, originalUndelimitedContent } = attributes;\n\tconst hasContent = !! originalUndelimitedContent;\n\tconst hasHTMLBlock = useSelect(\n\t\t( select ) => {\n\t\t\tconst { canInsertBlockType, getBlockRootClientId } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\treturn canInsertBlockType(\n\t\t\t\t'core/html',\n\t\t\t\tgetBlockRootClientId( clientId )\n\t\t\t);\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst actions = [];\n\tlet messageHTML;\n\tif ( hasContent && hasHTMLBlock ) {\n\t\tmessageHTML = sprintf(\n\t\t\t/* translators: %s: block name */\n\t\t\t__(\n\t\t\t\t'Your site doesn’t include support for the \"%s\" block. You can leave this block intact, convert its content to a Custom HTML block, or remove it entirely.'\n\t\t\t),\n\t\t\toriginalName\n\t\t);\n\t\tactions.push(\n\t\t\t<Button key=\"convert\" onClick={ convertToHTML } variant=\"primary\">\n\t\t\t\t{ __( 'Keep as HTML' ) }\n\t\t\t</Button>\n\t\t);\n\t} else {\n\t\tmessageHTML = sprintf(\n\t\t\t/* translators: %s: block name */\n\t\t\t__(\n\t\t\t\t'Your site doesn’t include support for the \"%s\" block. You can leave this block intact or remove it entirely.'\n\t\t\t),\n\t\t\toriginalName\n\t\t);\n\t}\n\n\treturn (\n\t\t<div { ...useBlockProps( { className: 'has-warning' } ) }>\n\t\t\t<Warning actions={ actions }>{ messageHTML }</Warning>\n\t\t\t<RawHTML>{ safeHTML( originalUndelimitedContent ) }</RawHTML>\n\t\t</div>\n\t);\n}\n\nconst MissingEdit = withDispatch( ( dispatch, { clientId, attributes } ) => {\n\tconst { replaceBlock } = dispatch( blockEditorStore );\n\treturn {\n\t\tconvertToHTML() {\n\t\t\treplaceBlock(\n\t\t\t\tclientId,\n\t\t\t\tcreateBlock( 'core/html', {\n\t\t\t\t\tcontent: attributes.originalUndelimitedContent,\n\t\t\t\t} )\n\t\t\t);\n\t\t},\n\t};\n} )( MissingBlockWarning );\n\nexport default MissingEdit;\n"]}