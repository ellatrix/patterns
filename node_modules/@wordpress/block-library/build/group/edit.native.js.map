{"version":3,"sources":["@wordpress/block-library/src/group/edit.native.js"],"names":["isFullWidth","alignmentHelpers","GroupEdit","attributes","hasInnerBlocks","isSelected","isLastInnerBlockSelected","getStylesFromColorScheme","style","blockWidth","align","resizeObserver","sizes","width","renderAppender","styles","groupAppender","fullwidthGroupAppender","fullwidthHasInnerGroupAppender","groupPlaceholder","groupPlaceholderDark","marginVerticalDense","marginHorizontalNone","innerBlocks","backgroundColor","hasBackgroundAppender","select","clientId","getBlock","getBlockIndex","hasSelectedInnerBlock","getBlockRootClientId","getSelectedBlockClientId","getBlockAttributes","blockEditorStore","block","length","isInnerBlockSelected","selectedBlockClientId","totalInnerBlocks","blockIndex","parentId","parentBlockAlignment","withPreferredColorScheme"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport {\n\tcompose,\n\twithPreferredColorScheme,\n\tuseResizeObserver,\n} from '@wordpress/compose';\nimport {\n\tInnerBlocks,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useCallback } from '@wordpress/element';\nimport { alignmentHelpers } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport styles from './editor.scss';\n\nconst { isFullWidth } = alignmentHelpers;\n\nfunction GroupEdit( {\n\tattributes,\n\thasInnerBlocks,\n\tisSelected,\n\tisLastInnerBlockSelected,\n\tgetStylesFromColorScheme,\n\tstyle,\n\tblockWidth,\n} ) {\n\tconst { align } = attributes;\n\tconst [ resizeObserver, sizes ] = useResizeObserver();\n\tconst { width } = sizes || { width: 0 };\n\n\tconst renderAppender = useCallback(\n\t\t() => (\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\t! hasInnerBlocks && styles.groupAppender,\n\t\t\t\t\tisFullWidth( align ) &&\n\t\t\t\t\t\t! hasInnerBlocks &&\n\t\t\t\t\t\tstyles.fullwidthGroupAppender,\n\t\t\t\t\tisFullWidth( align ) &&\n\t\t\t\t\t\thasInnerBlocks &&\n\t\t\t\t\t\tstyles.fullwidthHasInnerGroupAppender,\n\t\t\t\t] }\n\t\t\t>\n\t\t\t\t<InnerBlocks.ButtonBlockAppender />\n\t\t\t</View>\n\t\t),\n\t\t[ align, hasInnerBlocks ]\n\t);\n\n\tif ( ! isSelected && ! hasInnerBlocks ) {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\tgetStylesFromColorScheme(\n\t\t\t\t\t\tstyles.groupPlaceholder,\n\t\t\t\t\t\tstyles.groupPlaceholderDark\n\t\t\t\t\t),\n\t\t\t\t\t! hasInnerBlocks && {\n\t\t\t\t\t\t...styles.marginVerticalDense,\n\t\t\t\t\t\t...styles.marginHorizontalNone,\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<View\n\t\t\tstyle={ [\n\t\t\t\tisSelected && hasInnerBlocks && styles.innerBlocks,\n\t\t\t\tstyle,\n\t\t\t\tisSelected &&\n\t\t\t\t\thasInnerBlocks &&\n\t\t\t\t\tstyle?.backgroundColor &&\n\t\t\t\t\tstyles.hasBackgroundAppender,\n\t\t\t\tisLastInnerBlockSelected &&\n\t\t\t\t\tstyle?.backgroundColor &&\n\t\t\t\t\tstyles.isLastInnerBlockSelected,\n\t\t\t] }\n\t\t>\n\t\t\t{ resizeObserver }\n\t\t\t<InnerBlocks\n\t\t\t\trenderAppender={ isSelected && renderAppender }\n\t\t\t\tparentWidth={ width }\n\t\t\t\tblockWidth={ blockWidth }\n\t\t\t/>\n\t\t</View>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlock,\n\t\t\tgetBlockIndex,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlockAttributes,\n\t\t} = select( blockEditorStore );\n\n\t\tconst block = getBlock( clientId );\n\t\tconst hasInnerBlocks = !! ( block && block.innerBlocks.length );\n\t\tconst isInnerBlockSelected =\n\t\t\thasInnerBlocks && hasSelectedInnerBlock( clientId, true );\n\t\tlet isLastInnerBlockSelected = false;\n\n\t\tif ( isInnerBlockSelected ) {\n\t\t\tconst { innerBlocks } = block;\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\tconst totalInnerBlocks = innerBlocks.length - 1;\n\t\t\tconst blockIndex = getBlockIndex( selectedBlockClientId );\n\t\t\tisLastInnerBlockSelected = totalInnerBlocks === blockIndex;\n\t\t}\n\n\t\tconst parentId = getBlockRootClientId( clientId );\n\t\tconst parentBlockAlignment = getBlockAttributes( parentId )?.align;\n\n\t\treturn {\n\t\t\thasInnerBlocks,\n\t\t\tisLastInnerBlockSelected,\n\t\t\tparentBlockAlignment,\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( GroupEdit );\n"]}