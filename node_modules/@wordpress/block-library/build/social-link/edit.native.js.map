{"version":3,"sources":["@wordpress/block-library/src/social-link/edit.native.js"],"names":["DEFAULT_ACTIVE_ICON_STYLES","backgroundColor","color","DEFAULT_INACTIVE_ICON_STYLES","ANIMATION_DELAY","ANIMATION_DURATION","linkSettingsOptions","url","label","placeholder","autoFocus","linkLabel","footer","SocialLinkEdit","attributes","setAttributes","isSelected","onFocus","name","service","isLinkSheetVisible","setIsLinkSheetVisible","hasUrl","setHasUrl","activeIcon","styles","inactiveIcon","inactiveIconDark","animatedValue","Animated","Value","current","IconComponent","socialLinkName","setValue","animateColors","interpolationColors","interpolate","inputRange","outputRange","stroke","sequence","delay","timing","toValue","duration","easing","Easing","circle","start","onCloseSettingsSheet","onOpenSettingsSheet","onEmptyURL","onIconPress","accessibilityHint","link","rel","iconContainer","select","clientId","getBlock","blockEditorStore","block","substring"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Animated, Easing, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tBlockControls,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useEffect, useState, useRef, useCallback } from '@wordpress/element';\nimport {\n\tToolbarGroup,\n\tToolbarButton,\n\tLinkSettingsNavigation,\n} from '@wordpress/components';\nimport { compose, usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { link, Icon } from '@wordpress/icons';\nimport { withSelect } from '@wordpress/data';\n/**\n * Internal dependencies\n */\nimport { getIconBySite, getNameBySite } from './social-list';\nimport styles from './editor.scss';\n\nconst DEFAULT_ACTIVE_ICON_STYLES = {\n\tbackgroundColor: '#f0f0f0',\n\tcolor: '#444',\n};\nconst DEFAULT_INACTIVE_ICON_STYLES = {\n\tbackgroundColor: '#0000003f',\n\tcolor: '#fff',\n};\nconst ANIMATION_DELAY = 300;\nconst ANIMATION_DURATION = 400;\n\nconst linkSettingsOptions = {\n\turl: {\n\t\tlabel: __( 'URL' ),\n\t\tplaceholder: __( 'Add URL' ),\n\t\tautoFocus: true,\n\t},\n\tlinkLabel: {\n\t\tlabel: __( 'Link label' ),\n\t\tplaceholder: __( 'None' ),\n\t},\n\tfooter: {\n\t\tlabel: __( 'Briefly describe the link to help screen reader user' ),\n\t},\n};\n\nconst SocialLinkEdit = ( {\n\tattributes,\n\tsetAttributes,\n\tisSelected,\n\tonFocus,\n\tname,\n} ) => {\n\tconst { url, service = name } = attributes;\n\tconst [ isLinkSheetVisible, setIsLinkSheetVisible ] = useState( false );\n\tconst [ hasUrl, setHasUrl ] = useState( !! url );\n\tconst activeIcon =\n\t\tstyles[ `wp-social-link-${ service }` ] ||\n\t\tstyles[ `wp-social-link` ] ||\n\t\tDEFAULT_ACTIVE_ICON_STYLES;\n\tconst inactiveIcon =\n\t\tusePreferredColorSchemeStyle(\n\t\t\tstyles.inactiveIcon,\n\t\t\tstyles.inactiveIconDark\n\t\t) || DEFAULT_INACTIVE_ICON_STYLES;\n\n\tconst animatedValue = useRef( new Animated.Value( 0 ) ).current;\n\n\tconst IconComponent = getIconBySite( service )();\n\tconst socialLinkName = getNameBySite( service );\n\n\t// When new social icon is added link sheet is opened automatically.\n\tuseEffect( () => {\n\t\tif ( isSelected && ! url ) {\n\t\t\tsetIsLinkSheetVisible( true );\n\t\t}\n\t}, [] );\n\n\tuseEffect( () => {\n\t\tif ( ! url ) {\n\t\t\tsetHasUrl( false );\n\t\t\tanimatedValue.setValue( 0 );\n\t\t} else if ( url ) {\n\t\t\tanimateColors();\n\t\t}\n\t}, [ url ] );\n\n\tconst interpolationColors = {\n\t\tbackgroundColor: animatedValue.interpolate( {\n\t\t\tinputRange: [ 0, 1 ],\n\t\t\toutputRange: [\n\t\t\t\tinactiveIcon.backgroundColor,\n\t\t\t\tactiveIcon.backgroundColor,\n\t\t\t],\n\t\t} ),\n\t\tcolor: animatedValue.interpolate( {\n\t\t\tinputRange: [ 0, 1 ],\n\t\t\toutputRange: [ inactiveIcon.color, activeIcon.color ],\n\t\t} ),\n\t\tstroke: '',\n\t};\n\n\tconst { backgroundColor, color, stroke } = hasUrl\n\t\t? activeIcon\n\t\t: interpolationColors;\n\n\tfunction animateColors() {\n\t\tAnimated.sequence( [\n\t\t\tAnimated.delay( ANIMATION_DELAY ),\n\t\t\tAnimated.timing( animatedValue, {\n\t\t\t\ttoValue: 1,\n\t\t\t\tduration: ANIMATION_DURATION,\n\t\t\t\teasing: Easing.circle,\n\t\t\t} ),\n\t\t] ).start( () => setHasUrl( true ) );\n\t}\n\n\tconst onCloseSettingsSheet = useCallback( () => {\n\t\tsetIsLinkSheetVisible( false );\n\t}, [] );\n\n\tconst onOpenSettingsSheet = useCallback( () => {\n\t\tsetIsLinkSheetVisible( true );\n\t}, [] );\n\n\tconst onEmptyURL = useCallback( () => {\n\t\tanimatedValue.setValue( 0 );\n\t\tsetHasUrl( false );\n\t}, [ animatedValue ] );\n\n\tfunction onIconPress() {\n\t\tif ( isSelected ) {\n\t\t\tsetIsLinkSheetVisible( true );\n\t\t} else {\n\t\t\tonFocus();\n\t\t}\n\t}\n\n\tconst accessibilityHint = url\n\t\t? sprintf(\n\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t__( '%s has URL set' ),\n\t\t\t\tsocialLinkName\n\t\t  )\n\t\t: sprintf(\n\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t__( '%s has no URL set' ),\n\t\t\t\tsocialLinkName\n\t\t  );\n\n\treturn (\n\t\t<View>\n\t\t\t{ isSelected && (\n\t\t\t\t<>\n\t\t\t\t\t<BlockControls>\n\t\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\ttitle={ sprintf(\n\t\t\t\t\t\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t\t\t\t\t\t__( 'Add link to %s' ),\n\t\t\t\t\t\t\t\t\tsocialLinkName\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\t\t\tonClick={ onOpenSettingsSheet }\n\t\t\t\t\t\t\t\tisActive={ url }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t</BlockControls>\n\t\t\t\t\t<LinkSettingsNavigation\n\t\t\t\t\t\tisVisible={ isLinkSheetVisible }\n\t\t\t\t\t\turl={ attributes.url }\n\t\t\t\t\t\tlabel={ attributes.label }\n\t\t\t\t\t\trel={ attributes.rel }\n\t\t\t\t\t\tonEmptyURL={ onEmptyURL }\n\t\t\t\t\t\tonClose={ onCloseSettingsSheet }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\toptions={ linkSettingsOptions }\n\t\t\t\t\t\twithBottomSheet\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) }\n\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\tonPress={ onIconPress }\n\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\taccessibilityLabel={ sprintf(\n\t\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t\t__( '%s social icon' ),\n\t\t\t\t\tsocialLinkName\n\t\t\t\t) }\n\t\t\t\taccessibilityHint={ accessibilityHint }\n\t\t\t>\n\t\t\t\t<Animated.View\n\t\t\t\t\tstyle={ [ styles.iconContainer, { backgroundColor } ] }\n\t\t\t\t>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tanimated\n\t\t\t\t\t\ticon={ IconComponent }\n\t\t\t\t\t\tstyle={ { stroke, color } }\n\t\t\t\t\t/>\n\t\t\t\t</Animated.View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t</View>\n\t);\n};\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlock } = select( blockEditorStore );\n\n\t\tconst block = getBlock( clientId );\n\t\tconst name = block?.name.substring( 17 );\n\n\t\treturn {\n\t\t\tname,\n\t\t};\n\t} ),\n] )( SocialLinkEdit );\n"]}