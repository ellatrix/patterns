{"version":3,"sources":["@wordpress/block-library/src/freeform/modal.js"],"names":["ClassicEdit","props","styles","select","store","getSettings","baseURL","suffix","settings","window","wpEditorL10n","tinymce","EditorManager","overrideDefaults","base_url","wp","oldEditor","initialize","id","height","setup","editor","on","doc","getDoc","forEach","css","styleEl","createElement","innerHTML","head","appendChild","remove","ModalEdit","clientId","attributes","content","setAttributes","onReplace","isOpen","setOpen","label","display","justifyContent","getContent"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { BlockControls, store } from '@wordpress/block-editor';\nimport {\n\tToolbarGroup,\n\tToolbarButton,\n\tModal,\n\tButton,\n} from '@wordpress/components';\nimport { useEffect, useState, RawHTML } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\n\nfunction ClassicEdit( props ) {\n\tconst styles = useSelect(\n\t\t( select ) => select( store ).getSettings().styles\n\t);\n\tuseEffect( () => {\n\t\tconst { baseURL, suffix, settings } = window.wpEditorL10n.tinymce;\n\n\t\twindow.tinymce.EditorManager.overrideDefaults( {\n\t\t\tbase_url: baseURL,\n\t\t\tsuffix,\n\t\t} );\n\n\t\twindow.wp.oldEditor.initialize( props.id, {\n\t\t\ttinymce: {\n\t\t\t\t...settings,\n\t\t\t\theight: 500,\n\t\t\t\tsetup( editor ) {\n\t\t\t\t\teditor.on( 'init', () => {\n\t\t\t\t\t\tconst doc = editor.getDoc();\n\t\t\t\t\t\tstyles.forEach( ( { css } ) => {\n\t\t\t\t\t\t\tconst styleEl = doc.createElement( 'style' );\n\t\t\t\t\t\t\tstyleEl.innerHTML = css;\n\t\t\t\t\t\t\tdoc.head.appendChild( styleEl );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t} );\n\n\t\treturn () => {\n\t\t\twindow.wp.oldEditor.remove( props.id );\n\t\t};\n\t}, [] );\n\n\treturn <textarea { ...props } />;\n}\n\nexport default function ModalEdit( props ) {\n\tconst {\n\t\tclientId,\n\t\tattributes: { content },\n\t\tsetAttributes,\n\t\tonReplace,\n\t} = props;\n\tconst [ isOpen, setOpen ] = useState( false );\n\tconst id = `editor-${ clientId }`;\n\tconst label = __( 'Classic Edit' );\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarButton onClick={ () => setOpen( true ) }>\n\t\t\t\t\t\t{ label }\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t{ content && <RawHTML>{ content }</RawHTML> }\n\t\t\t{ ( isOpen || ! content ) && (\n\t\t\t\t<Modal title={ label } __experimentalHideHeader={ true }>\n\t\t\t\t\t<h2\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<div>{ label }</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tcontent ? setOpen( false ) : onReplace( [] )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tcontent:\n\t\t\t\t\t\t\t\t\t\t\twindow.wp.oldEditor.getContent(\n\t\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\tsetOpen( false );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</h2>\n\t\t\t\t\t<ClassicEdit id={ id } defaultValue={ content } />\n\t\t\t\t</Modal>\n\t\t\t) }\n\t\t</>\n\t);\n}\n"]}