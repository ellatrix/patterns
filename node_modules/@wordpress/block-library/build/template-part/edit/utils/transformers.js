"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.transformWidgetToBlock = transformWidgetToBlock;

var _blocks = require("@wordpress/blocks");

/**
 * WordPress dependencies
 */

/**
 * Converts a widget entity record into a block.
 *
 * @param {Object} widget The widget entity record.
 * @return {Object} a block (converted from the entity record).
 */
function transformWidgetToBlock(widget) {
  if (widget.id_base === 'block') {
    const parsedBlocks = (0, _blocks.parse)(widget.instance.raw.content, {
      __unstableSkipAutop: true
    });

    if (!parsedBlocks.length) {
      return (0, _blocks.createBlock)('core/paragraph', {}, []);
    }

    return parsedBlocks[0];
  }

  let attributes;

  if (widget._embedded.about[0].is_multi) {
    attributes = {
      idBase: widget.id_base,
      instance: widget.instance
    };
  } else {
    attributes = {
      id: widget.id
    };
  }

  return (0, _blocks.createBlock)('core/legacy-widget', attributes, []);
}
//# sourceMappingURL=transformers.js.map