{"version":3,"sources":["@wordpress/block-library/src/pattern/edit.js"],"names":["PatternEdit","attributes","clientId","selectedPattern","select","blockEditorStore","__experimentalGetParsedPattern","slug","replaceBlocks","__unstableMarkNextChangeAsNotPersistent","blocks","window","queueMicrotask","props"],"mappings":";;;;;;;AAIA;;AADA;;AAEA;;AALA;AACA;AACA;AAQA,MAAMA,WAAW,GAAG,QAAgC;AAAA,MAA9B;AAAEC,IAAAA,UAAF;AAAcC,IAAAA;AAAd,GAA8B;AACnD,QAAMC,eAAe,GAAG,qBACrBC,MAAF,IACCA,MAAM,CAAEC,kBAAF,CAAN,CAA2BC,8BAA3B,CACCL,UAAU,CAACM,IADZ,CAFsB,EAKvB,CAAEN,UAAU,CAACM,IAAb,CALuB,CAAxB;AAQA,QAAM;AAAEC,IAAAA,aAAF;AAAiBC,IAAAA;AAAjB,MACL,uBAAaJ,kBAAb,CADD,CATmD,CAYnD;AACA;AACA;AACA;;AACA,0BAAW,MAAM;AAChB,QAAKF,eAAL,aAAKA,eAAL,eAAKA,eAAe,CAAEO,MAAtB,EAA+B;AAC9B;AACA;AACA;AACA;AACA;AACAC,MAAAA,MAAM,CAACC,cAAP,CAAuB,MAAM;AAC5BH,QAAAA,uCAAuC;;AACvCD,QAAAA,aAAa,CAAEN,QAAF,EAAYC,eAAe,CAACO,MAA5B,CAAb;AACA,OAHD;AAIA;AACD,GAZD,EAYG,CAAER,QAAF,EAAYC,eAAZ,aAAYA,eAAZ,uBAAYA,eAAe,CAAEO,MAA7B,CAZH;AAcA,QAAMG,KAAK,GAAG,iCAAd;AAEA,SAAO,mCAAUA,KAAV,CAAP;AACA,CAjCD;;eAmCeb,W","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\nimport {\n\tstore as blockEditorStore,\n\tuseBlockProps,\n} from '@wordpress/block-editor';\n\nconst PatternEdit = ( { attributes, clientId } ) => {\n\tconst selectedPattern = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).__experimentalGetParsedPattern(\n\t\t\t\tattributes.slug\n\t\t\t),\n\t\t[ attributes.slug ]\n\t);\n\n\tconst { replaceBlocks, __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\n\t// Run this effect when the component loads.\n\t// This adds the Pattern's contents to the post.\n\t// This change won't be saved.\n\t// It will continue to pull from the pattern file unless changes are made to its respective template part.\n\tuseEffect( () => {\n\t\tif ( selectedPattern?.blocks ) {\n\t\t\t// We batch updates to block list settings to avoid triggering cascading renders\n\t\t\t// for each container block included in a tree and optimize initial render.\n\t\t\t// Since the above uses microtasks, we need to use a microtask here as well,\n\t\t\t// because nested pattern blocks cannot be inserted if the parent block supports\n\t\t\t// inner blocks but doesn't have blockSettings in the state.\n\t\t\twindow.queueMicrotask( () => {\n\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\treplaceBlocks( clientId, selectedPattern.blocks );\n\t\t\t} );\n\t\t}\n\t}, [ clientId, selectedPattern?.blocks ] );\n\n\tconst props = useBlockProps();\n\n\treturn <div { ...props } />;\n};\n\nexport default PatternEdit;\n"]}