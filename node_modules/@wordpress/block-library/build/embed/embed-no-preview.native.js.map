{"version":3,"sources":["@wordpress/block-library/src/embed/embed-no-preview.native.js"],"names":["EmbedNoPreview","label","icon","isSelected","onPress","previewable","isDefaultEmbedInfo","shouldRequestReview","isSheetVisible","setIsSheetVisible","postType","select","editorStore","getEditedPostAttribute","containerStyle","styles","embed__container","labelStyle","embed__label","descriptionStyle","embed__description","helpIconStyle","sheetIconStyle","sheetTitleStyle","sheetDescriptionStyle","sheetButtonStyle","previewButtonA11yHint","previewButtonText","comingSoonDescription","onOpenSheet","onCloseSheet","onDismissSheet","current","onPressContainer","onPressHelp","embedNoProviderPreview","embed__action","toUpperCase","help","fill","width"],"mappings":";;;;;;;;;AAWA;;AARA;;AAKA;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAKA;;AAvBA;AACA;AACA;;AAGA;AACA;AACA;;AAaA;AACA;AACA;AAGA,MAAMA,cAAc,GAAG,QAOhB;AAAA,MAPkB;AACxBC,IAAAA,KADwB;AAExBC,IAAAA,IAFwB;AAGxBC,IAAAA,UAHwB;AAIxBC,IAAAA,OAJwB;AAKxBC,IAAAA,WALwB;AAMxBC,IAAAA;AANwB,GAOlB;AACN,QAAMC,mBAAmB,GAAG,qBAAQ,KAAR,CAA5B;AACA,QAAM,CAAEC,cAAF,EAAkBC,iBAAlB,IAAwC,uBAAU,KAAV,CAA9C;AAEA,QAAM;AAAEC,IAAAA;AAAF,MAAe,qBAAaC,MAAF,KAAgB;AAC/CD,IAAAA,QAAQ,EAAEC,MAAM,CAAEC,aAAF,CAAN,CAAsBC,sBAAtB,CAA8C,MAA9C;AADqC,GAAhB,CAAX,CAArB;AAIA,QAAMC,cAAc,GAAG,2CACtBC,gBAAOC,gBADe,EAEtBD,gBAAQ,wBAAR,CAFsB,CAAvB;AAIA,QAAME,UAAU,GAAG,2CAClBF,gBAAOG,YADW,EAElBH,gBAAQ,oBAAR,CAFkB,CAAnB;AAIA,QAAMI,gBAAgB,GAAG,2CACxBJ,gBAAOK,kBADiB,EAExBL,gBAAQ,0BAAR,CAFwB,CAAzB;AAIA,QAAMM,aAAa,GAAG,2CACrBN,gBAAQ,6BAAR,CADqB,EAErBA,gBAAQ,mCAAR,CAFqB,CAAtB;AAKA,QAAMO,cAAc,GAAG,2CACtBP,gBAAQ,8BAAR,CADsB,EAEtBA,gBAAQ,oCAAR,CAFsB,CAAvB;AAIA,QAAMQ,eAAe,GAAG,2CACvBR,gBAAQ,+BAAR,CADuB,EAEvBA,gBAAQ,qCAAR,CAFuB,CAAxB;AAIA,QAAMS,qBAAqB,GAAG,2CAC7BT,gBAAQ,qCAAR,CAD6B,EAE7BA,gBAAQ,2CAAR,CAF6B,CAA9B;AAIA,QAAMU,gBAAgB,GAAG,2CACxBV,gBAAQ,gCAAR,CADwB,EAExBA,gBAAQ,sCAAR,CAFwB,CAAzB;AAKA,QAAMW,qBAAqB,GAC1BhB,QAAQ,KAAK,MAAb,GACG,cAAI,6BAAJ,CADH,GAEG,cAAI,6BAAJ,CAHJ;AAIA,QAAMiB,iBAAiB,GACtBjB,QAAQ,KAAK,MAAb,GAAsB,cAAI,cAAJ,CAAtB,GAA6C,cAAI,cAAJ,CAD9C;AAEA,QAAMkB,qBAAqB,GAC1BlB,QAAQ,KAAK,MAAb,GACG,oBACA;AACA,gBACC,0HADD,CAFA,EAKAT,KALA,CADH,GAQG,oBACA;AACA,gBACC,0HADD,CAFA,EAKAA,KALA,CATJ;;AAiBA,WAAS4B,WAAT,GAAuB;AACtBpB,IAAAA,iBAAiB,CAAE,IAAF,CAAjB;AACA;;AAED,WAASqB,YAAT,GAAwB;AACvBrB,IAAAA,iBAAiB,CAAE,KAAF,CAAjB;AACA;;AAED,WAASsB,cAAT,GAA0B;AACzB;AACA;AACA,QAAKxB,mBAAmB,CAACyB,OAAzB,EAAmC;AAClC;AACA;;AACDzB,IAAAA,mBAAmB,CAACyB,OAApB,GAA8B,KAA9B;AACA;;AAED,WAASC,gBAAT,GAA4B;AAC3B7B,IAAAA,OAAO;AACPyB,IAAAA,WAAW;AACX;;AAED,WAASK,WAAT,GAAuB;AACtBD,IAAAA,gBAAgB;AAChB;;AAED,QAAME,sBAAsB,GAC3B,qDACC,4BAAC,qCAAD;AACC,IAAA,iBAAiB,EAAG,QADrB;AAEC,IAAA,iBAAiB,EAAGT,qBAFrB;AAGC,IAAA,QAAQ,EAAG,CAAEvB,UAHd;AAIC,IAAA,OAAO,EAAG8B;AAJX,KAMC,4BAAC,gBAAD;AAAM,IAAA,KAAK,EAAGnB;AAAd,KACC,4BAAC,sBAAD;AAAW,IAAA,IAAI,EAAGZ;AAAlB,IADD,EAEC,4BAAC,iBAAD;AAAM,IAAA,KAAK,EAAGe;AAAd,KAA6BhB,KAA7B,CAFD,EAGC,4BAAC,iBAAD;AAAM,IAAA,KAAK,EAAGkB;AAAd,KACG,oBACD;AACA,gBAAI,+BAAJ,CAFC,EAGDlB,KAHC,CADH,CAHD,EAUC,4BAAC,iBAAD;AAAM,IAAA,KAAK,EAAGc,gBAAOqB;AAArB,KACGT,iBAAiB,CAACU,WAAlB,EADH,CAVD,EAaC,4BAAC,6BAAD;AACC,IAAA,iBAAiB,EAAG,cAAI,uBAAJ,CADrB;AAEC,IAAA,kBAAkB,EAAG,cAAI,aAAJ,CAFtB;AAGC,IAAA,iBAAiB,EAAG,QAHrB;AAIC,IAAA,QAAQ,EAAG,CAAElC,UAJd;AAKC,IAAA,OAAO,EAAG+B,WALX;AAMC,IAAA,KAAK,EAAGb;AANT,KAQC,4BAAC,gBAAD;AACC,IAAA,IAAI,EAAGiB,WADR;AAEC,IAAA,IAAI,EAAGjB,aAAa,CAACkB,IAFtB;AAGC,IAAA,IAAI,EAAGlB,aAAa,CAACmB;AAHtB,IARD,CAbD,CAND,CADD,EAoCC,4BAAC,uBAAD;AACC,IAAA,SAAS,EAAGhC,cADb;AAEC,IAAA,UAAU,MAFX;AAGC,IAAA,SAAS,EAAGuB,cAHb;AAIC,IAAA,OAAO,EAAGD,YAJX;AAKC,IAAA,MAAM,EAAC;AALR,KAOC,4BAAC,gBAAD;AAAM,IAAA,KAAK,EAAGf,gBAAQ,6BAAR;AAAd,KACC,4BAAC,gBAAD;AAAM,IAAA,KAAK,EAAGO;AAAd,KACC,4BAAC,gBAAD;AACC,IAAA,IAAI,EAAGgB,WADR;AAEC,IAAA,IAAI,EAAGhB,cAAc,CAACiB,IAFvB;AAGC,IAAA,IAAI,EAAGjB,cAAc,CAACkB;AAHvB,IADD,CADD,EAQC,4BAAC,iBAAD;AAAM,IAAA,KAAK,EAAGjB;AAAd,KACGjB,kBAAkB,GACjB,cAAI,sCAAJ,CADiB,GAEjB,oBACA;AACA,gBACC,yCADD,CAFA,EAKAL,KALA,CAHJ,CARD,EAmBC,4BAAC,iBAAD;AAAM,IAAA,KAAK,EAAGuB;AAAd,KACGI,qBADH,CAnBD,CAPD,EA8BC,4BAAC,uBAAD;AACC,IAAA,KAAK,EAAGD,iBADT;AAEC,IAAA,aAAa,EAAC,cAFf;AAGC,IAAA,OAAO,EAAG,MAAM;AACfpB,MAAAA,mBAAmB,CAACyB,OAApB,GAA8B,IAA9B;AACAF,MAAAA,YAAY;AACZ,KANF;AAOC,IAAA,UAAU,EAAGL;AAPd,IA9BD,EAuCC,4BAAC,uBAAD;AACC,IAAA,KAAK,EAAG,cAAI,SAAJ,CADT;AAEC,IAAA,aAAa,EAAC,cAFf;AAGC,IAAA,OAAO,EAAGK,YAHX;AAIC,IAAA,UAAU,EAAGL;AAJd,IAvCD,CApCD,CADD;AAsFA,SACC,qDACGpB,WAAW,GACZ8B,sBADY,GAGZ,4BAAC,gBAAD;AAAM,IAAA,KAAK,EAAGrB;AAAd,KACC,4BAAC,sBAAD;AAAW,IAAA,IAAI,EAAGZ;AAAlB,IADD,EAEC,4BAAC,iBAAD;AAAM,IAAA,KAAK,EAAGe;AAAd,KACG,cAAI,sBAAJ,CADH,CAFD,CAJF,CADD;AAcA,CAtMD;;eAwMejB,c","sourcesContent":["/**\n * External dependencies\n */\nimport { TouchableOpacity, TouchableWithoutFeedback, Text } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { View } from '@wordpress/primitives';\n\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useRef, useState } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { requestPreview } from '@wordpress/react-native-bridge';\nimport { useSelect } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\nimport { BottomSheet, Icon, TextControl } from '@wordpress/components';\nimport { help } from '@wordpress/icons';\nimport { BlockIcon } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport styles from './styles.scss';\n\nconst EmbedNoPreview = ( {\n\tlabel,\n\ticon,\n\tisSelected,\n\tonPress,\n\tpreviewable,\n\tisDefaultEmbedInfo,\n} ) => {\n\tconst shouldRequestReview = useRef( false );\n\tconst [ isSheetVisible, setIsSheetVisible ] = useState( false );\n\n\tconst { postType } = useSelect( ( select ) => ( {\n\t\tpostType: select( editorStore ).getEditedPostAttribute( 'type' ),\n\t} ) );\n\n\tconst containerStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__container,\n\t\tstyles[ 'embed__container--dark' ]\n\t);\n\tconst labelStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__label,\n\t\tstyles[ 'embed__label--dark' ]\n\t);\n\tconst descriptionStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__description,\n\t\tstyles[ 'embed__description--dark' ]\n\t);\n\tconst helpIconStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__help-icon' ],\n\t\tstyles[ 'embed-no-preview__help-icon--dark' ]\n\t);\n\n\tconst sheetIconStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-icon' ],\n\t\tstyles[ 'embed-no-preview__sheet-icon--dark' ]\n\t);\n\tconst sheetTitleStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-title' ],\n\t\tstyles[ 'embed-no-preview__sheet-title--dark' ]\n\t);\n\tconst sheetDescriptionStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-description' ],\n\t\tstyles[ 'embed-no-preview__sheet-description--dark' ]\n\t);\n\tconst sheetButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-button' ],\n\t\tstyles[ 'embed-no-preview__sheet-button--dark' ]\n\t);\n\n\tconst previewButtonA11yHint =\n\t\tpostType === 'page'\n\t\t\t? __( 'Double tap to preview page.' )\n\t\t\t: __( 'Double tap to preview post.' );\n\tconst previewButtonText =\n\t\tpostType === 'page' ? __( 'Preview page' ) : __( 'Preview post' );\n\tconst comingSoonDescription =\n\t\tpostType === 'page'\n\t\t\t? sprintf(\n\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t__(\n\t\t\t\t\t\t'We’re working hard on adding support for %s previews. In the meantime, you can preview the embedded content on the page.'\n\t\t\t\t\t),\n\t\t\t\t\tlabel\n\t\t\t  )\n\t\t\t: sprintf(\n\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t__(\n\t\t\t\t\t\t'We’re working hard on adding support for %s previews. In the meantime, you can preview the embedded content on the post.'\n\t\t\t\t\t),\n\t\t\t\t\tlabel\n\t\t\t  );\n\n\tfunction onOpenSheet() {\n\t\tsetIsSheetVisible( true );\n\t}\n\n\tfunction onCloseSheet() {\n\t\tsetIsSheetVisible( false );\n\t}\n\n\tfunction onDismissSheet() {\n\t\t// The preview request has to be done after the bottom sheet modal is dismissed,\n\t\t// otherwise the preview native modal is not displayed.\n\t\tif ( shouldRequestReview.current ) {\n\t\t\trequestPreview();\n\t\t}\n\t\tshouldRequestReview.current = false;\n\t}\n\n\tfunction onPressContainer() {\n\t\tonPress();\n\t\tonOpenSheet();\n\t}\n\n\tfunction onPressHelp() {\n\t\tonPressContainer();\n\t}\n\n\tconst embedNoProviderPreview = (\n\t\t<>\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\taccessibilityHint={ previewButtonA11yHint }\n\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\tonPress={ onPressContainer }\n\t\t\t>\n\t\t\t\t<View style={ containerStyle }>\n\t\t\t\t\t<BlockIcon icon={ icon } />\n\t\t\t\t\t<Text style={ labelStyle }>{ label }</Text>\n\t\t\t\t\t<Text style={ descriptionStyle }>\n\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t\t\t__( '%s previews not yet available' ),\n\t\t\t\t\t\t\tlabel\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Text style={ styles.embed__action }>\n\t\t\t\t\t\t{ previewButtonText.toUpperCase() }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\taccessibilityHint={ __( 'Tap here to show help' ) }\n\t\t\t\t\t\taccessibilityLabel={ __( 'Help button' ) }\n\t\t\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\tonPress={ onPressHelp }\n\t\t\t\t\t\tstyle={ helpIconStyle }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticon={ help }\n\t\t\t\t\t\t\tfill={ helpIconStyle.fill }\n\t\t\t\t\t\t\tsize={ helpIconStyle.width }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t\t<BottomSheet\n\t\t\t\tisVisible={ isSheetVisible }\n\t\t\t\thideHeader\n\t\t\t\tonDismiss={ onDismissSheet }\n\t\t\t\tonClose={ onCloseSheet }\n\t\t\t\ttestID=\"embed-no-preview-modal\"\n\t\t\t>\n\t\t\t\t<View style={ styles[ 'embed-no-preview__container' ] }>\n\t\t\t\t\t<View style={ sheetIconStyle }>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticon={ help }\n\t\t\t\t\t\t\tfill={ sheetIconStyle.fill }\n\t\t\t\t\t\t\tsize={ sheetIconStyle.width }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t\t<Text style={ sheetTitleStyle }>\n\t\t\t\t\t\t{ isDefaultEmbedInfo\n\t\t\t\t\t\t\t? __( 'Embed block previews are coming soon' )\n\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t\t'%s embed block previews are coming soon'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tlabel\n\t\t\t\t\t\t\t  ) }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Text style={ sheetDescriptionStyle }>\n\t\t\t\t\t\t{ comingSoonDescription }\n\t\t\t\t\t</Text>\n\t\t\t\t</View>\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={ previewButtonText }\n\t\t\t\t\tseparatorType=\"topFullWidth\"\n\t\t\t\t\tonPress={ () => {\n\t\t\t\t\t\tshouldRequestReview.current = true;\n\t\t\t\t\t\tonCloseSheet();\n\t\t\t\t\t} }\n\t\t\t\t\tlabelStyle={ sheetButtonStyle }\n\t\t\t\t/>\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={ __( 'Dismiss' ) }\n\t\t\t\t\tseparatorType=\"topFullWidth\"\n\t\t\t\t\tonPress={ onCloseSheet }\n\t\t\t\t\tlabelStyle={ sheetButtonStyle }\n\t\t\t\t/>\n\t\t\t</BottomSheet>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ previewable ? (\n\t\t\t\tembedNoProviderPreview\n\t\t\t) : (\n\t\t\t\t<View style={ containerStyle }>\n\t\t\t\t\t<BlockIcon icon={ icon } />\n\t\t\t\t\t<Text style={ labelStyle }>\n\t\t\t\t\t\t{ __( 'No preview available' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nexport default EmbedNoPreview;\n"]}