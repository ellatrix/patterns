{"version":3,"sources":["@wordpress/block-library/src/gallery/v1/gallery.js"],"names":["classnames","RichText","__experimentalGetElementClassName","VisuallyHidden","__","sprintf","createBlock","getDefaultBlockName","GalleryImage","defaultColumnsNumberV1","Gallery","props","attributes","isSelected","setAttributes","selectedImage","mediaPlaceholder","onMoveBackward","onMoveForward","onRemoveImage","onSelectImage","onDeselectImage","onSetImageAttributes","insertBlocksAfter","blockProps","align","columns","caption","imageCrop","images","className","map","img","index","ariaLabel","length","id","url","alt","attrs","sizeSlug","isEmpty","value","RichTextVisibilityHelper","isHidden","richTextProps"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tRichText,\n\t__experimentalGetElementClassName,\n} from '@wordpress/block-editor';\nimport { VisuallyHidden } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { createBlock, getDefaultBlockName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport GalleryImage from './gallery-image';\nimport { defaultColumnsNumberV1 } from '../deprecated';\n\nexport const Gallery = ( props ) => {\n\tconst {\n\t\tattributes,\n\t\tisSelected,\n\t\tsetAttributes,\n\t\tselectedImage,\n\t\tmediaPlaceholder,\n\t\tonMoveBackward,\n\t\tonMoveForward,\n\t\tonRemoveImage,\n\t\tonSelectImage,\n\t\tonDeselectImage,\n\t\tonSetImageAttributes,\n\t\tinsertBlocksAfter,\n\t\tblockProps,\n\t} = props;\n\n\tconst {\n\t\talign,\n\t\tcolumns = defaultColumnsNumberV1( attributes ),\n\t\tcaption,\n\t\timageCrop,\n\t\timages,\n\t} = attributes;\n\n\treturn (\n\t\t<figure\n\t\t\t{ ...blockProps }\n\t\t\tclassName={ classnames( blockProps.className, {\n\t\t\t\t[ `align${ align }` ]: align,\n\t\t\t\t[ `columns-${ columns }` ]: columns,\n\t\t\t\t'is-cropped': imageCrop,\n\t\t\t} ) }\n\t\t>\n\t\t\t<ul className=\"blocks-gallery-grid\">\n\t\t\t\t{ images.map( ( img, index ) => {\n\t\t\t\t\tconst ariaLabel = sprintf(\n\t\t\t\t\t\t/* translators: 1: the order number of the image. 2: the total number of images. */\n\t\t\t\t\t\t__( 'image %1$d of %2$d in gallery' ),\n\t\t\t\t\t\tindex + 1,\n\t\t\t\t\t\timages.length\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName=\"blocks-gallery-item\"\n\t\t\t\t\t\t\tkey={ img.id ? `${ img.id }-${ index }` : img.url }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<GalleryImage\n\t\t\t\t\t\t\t\turl={ img.url }\n\t\t\t\t\t\t\t\talt={ img.alt }\n\t\t\t\t\t\t\t\tid={ img.id }\n\t\t\t\t\t\t\t\tisFirstItem={ index === 0 }\n\t\t\t\t\t\t\t\tisLastItem={ index + 1 === images.length }\n\t\t\t\t\t\t\t\tisSelected={\n\t\t\t\t\t\t\t\t\tisSelected && selectedImage === index\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonMoveBackward={ onMoveBackward( index ) }\n\t\t\t\t\t\t\t\tonMoveForward={ onMoveForward( index ) }\n\t\t\t\t\t\t\t\tonRemove={ onRemoveImage( index ) }\n\t\t\t\t\t\t\t\tonSelect={ onSelectImage( index ) }\n\t\t\t\t\t\t\t\tonDeselect={ onDeselectImage( index ) }\n\t\t\t\t\t\t\t\tsetAttributes={ ( attrs ) =>\n\t\t\t\t\t\t\t\t\tonSetImageAttributes( index, attrs )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcaption={ img.caption }\n\t\t\t\t\t\t\t\taria-label={ ariaLabel }\n\t\t\t\t\t\t\t\tsizeSlug={ attributes.sizeSlug }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</ul>\n\t\t\t{ mediaPlaceholder }\n\t\t\t<RichTextVisibilityHelper\n\t\t\t\tisHidden={ ! isSelected && RichText.isEmpty( caption ) }\n\t\t\t\ttagName=\"figcaption\"\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'blocks-gallery-caption',\n\t\t\t\t\t__experimentalGetElementClassName( 'caption' )\n\t\t\t\t) }\n\t\t\t\taria-label={ __( 'Gallery caption text' ) }\n\t\t\t\tplaceholder={ __( 'Write gallery captionâ€¦' ) }\n\t\t\t\tvalue={ caption }\n\t\t\t\tonChange={ ( value ) => setAttributes( { caption: value } ) }\n\t\t\t\tinlineToolbar\n\t\t\t\t__unstableOnSplitAtEnd={ () =>\n\t\t\t\t\tinsertBlocksAfter( createBlock( getDefaultBlockName() ) )\n\t\t\t\t}\n\t\t\t/>\n\t\t</figure>\n\t);\n};\n\nfunction RichTextVisibilityHelper( { isHidden, ...richTextProps } ) {\n\treturn isHidden ? (\n\t\t<VisuallyHidden as={ RichText } { ...richTextProps } />\n\t) : (\n\t\t<RichText { ...richTextProps } />\n\t);\n}\n\nexport default Gallery;\n"]}