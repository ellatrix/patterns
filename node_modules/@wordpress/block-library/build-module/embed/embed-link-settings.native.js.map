{"version":3,"sources":["@wordpress/block-library/src/embed/embed-link-settings.native.js"],"names":["__","sprintf","LinkSettingsNavigation","FooterMessageLink","isURL","useDispatch","store","noticesStore","useCallback","useEffect","useRef","useState","EmbedLinkSettings","autoFocus","value","label","isVisible","onClose","onSubmit","withBottomSheet","url","inputURL","setInputURL","createErrorNotice","linkSettingsOptions","placeholder","autoFill","footer","separatorType","onDismiss","current","performOnCloseOperations","onSetAttributes","attributes"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tLinkSettingsNavigation,\n\tFooterMessageLink,\n} from '@wordpress/components';\nimport { isURL } from '@wordpress/url';\nimport { useDispatch } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { useCallback, useEffect, useRef, useState } from '@wordpress/element';\n\nconst EmbedLinkSettings = ( {\n\tautoFocus,\n\tvalue,\n\tlabel,\n\tisVisible,\n\tonClose,\n\tonSubmit,\n\twithBottomSheet,\n} ) => {\n\tconst url = useRef( value );\n\tconst [ inputURL, setInputURL ] = useState( value );\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\n\tconst linkSettingsOptions = {\n\t\turl: {\n\t\t\tlabel: sprintf(\n\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t__( '%s link' ),\n\t\t\t\tlabel\n\t\t\t),\n\t\t\tplaceholder: __( 'Add link' ),\n\t\t\tautoFocus,\n\t\t\tautoFill: true,\n\t\t},\n\t\tfooter: {\n\t\t\tlabel: (\n\t\t\t\t<FooterMessageLink\n\t\t\t\t\thref={ __(\n\t\t\t\t\t\t'https://wordpress.org/support/article/embeds/'\n\t\t\t\t\t) }\n\t\t\t\t\tvalue={ __( 'Learn more about embeds' ) }\n\t\t\t\t/>\n\t\t\t),\n\t\t\tseparatorType: 'topFullWidth',\n\t\t},\n\t};\n\n\tconst onDismiss = useCallback( () => {\n\t\tif ( ! isURL( url.current ) && url.current !== '' ) {\n\t\t\tcreateErrorNotice( __( 'Invalid URL. Please enter a valid URL.' ) );\n\t\t\t// If the URL was already defined, we submit it to stop showing the embed placeholder.\n\t\t\tonSubmit( value );\n\t\t\treturn;\n\t\t}\n\t\tonSubmit( url.current );\n\t}, [ onSubmit, value ] );\n\n\tuseEffect( () => {\n\t\turl.current = value;\n\t\tsetInputURL( value );\n\t}, [ value ] );\n\n\t/**\n\t * If the Embed Bottom Sheet component does not utilize a bottom sheet then the onDismiss action is not\n\t * called. Here we are wiring the onDismiss to the onClose callback that gets triggered when input is submitted.\n\t */\n\tconst performOnCloseOperations = useCallback( () => {\n\t\tif ( onClose ) {\n\t\t\tonClose();\n\t\t}\n\n\t\tif ( ! withBottomSheet ) {\n\t\t\tonDismiss();\n\t\t}\n\t}, [ onClose ] );\n\n\tconst onSetAttributes = useCallback( ( attributes ) => {\n\t\turl.current = attributes.url;\n\t\tsetInputURL( attributes.url );\n\t}, [] );\n\n\treturn (\n\t\t<LinkSettingsNavigation\n\t\t\tisVisible={ isVisible }\n\t\t\turl={ inputURL }\n\t\t\tonClose={ performOnCloseOperations }\n\t\t\tonDismiss={ onDismiss }\n\t\t\tsetAttributes={ onSetAttributes }\n\t\t\toptions={ linkSettingsOptions }\n\t\t\ttestID=\"embed-edit-url-modal\"\n\t\t\twithBottomSheet={ withBottomSheet }\n\t\t\tshowIcon\n\t\t/>\n\t);\n};\n\nexport default EmbedLinkSettings;\n"]}