{"version":3,"sources":["@wordpress/block-library/src/embed/embed-no-preview.native.js"],"names":["TouchableOpacity","TouchableWithoutFeedback","Text","View","__","sprintf","useRef","useState","usePreferredColorSchemeStyle","requestPreview","useSelect","store","editorStore","BottomSheet","Icon","TextControl","help","BlockIcon","styles","EmbedNoPreview","label","icon","isSelected","onPress","previewable","isDefaultEmbedInfo","shouldRequestReview","isSheetVisible","setIsSheetVisible","postType","select","getEditedPostAttribute","containerStyle","embed__container","labelStyle","embed__label","descriptionStyle","embed__description","helpIconStyle","sheetIconStyle","sheetTitleStyle","sheetDescriptionStyle","sheetButtonStyle","previewButtonA11yHint","previewButtonText","comingSoonDescription","onOpenSheet","onCloseSheet","onDismissSheet","current","onPressContainer","onPressHelp","embedNoProviderPreview","embed__action","toUpperCase","fill","width"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { TouchableOpacity, TouchableWithoutFeedback, Text } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { View } from '@wordpress/primitives';\n\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useRef, useState } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { requestPreview } from '@wordpress/react-native-bridge';\nimport { useSelect } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\nimport { BottomSheet, Icon, TextControl } from '@wordpress/components';\nimport { help } from '@wordpress/icons';\nimport { BlockIcon } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport styles from './styles.scss';\n\nconst EmbedNoPreview = ( {\n\tlabel,\n\ticon,\n\tisSelected,\n\tonPress,\n\tpreviewable,\n\tisDefaultEmbedInfo,\n} ) => {\n\tconst shouldRequestReview = useRef( false );\n\tconst [ isSheetVisible, setIsSheetVisible ] = useState( false );\n\n\tconst { postType } = useSelect( ( select ) => ( {\n\t\tpostType: select( editorStore ).getEditedPostAttribute( 'type' ),\n\t} ) );\n\n\tconst containerStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__container,\n\t\tstyles[ 'embed__container--dark' ]\n\t);\n\tconst labelStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__label,\n\t\tstyles[ 'embed__label--dark' ]\n\t);\n\tconst descriptionStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__description,\n\t\tstyles[ 'embed__description--dark' ]\n\t);\n\tconst helpIconStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__help-icon' ],\n\t\tstyles[ 'embed-no-preview__help-icon--dark' ]\n\t);\n\n\tconst sheetIconStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-icon' ],\n\t\tstyles[ 'embed-no-preview__sheet-icon--dark' ]\n\t);\n\tconst sheetTitleStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-title' ],\n\t\tstyles[ 'embed-no-preview__sheet-title--dark' ]\n\t);\n\tconst sheetDescriptionStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-description' ],\n\t\tstyles[ 'embed-no-preview__sheet-description--dark' ]\n\t);\n\tconst sheetButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-button' ],\n\t\tstyles[ 'embed-no-preview__sheet-button--dark' ]\n\t);\n\n\tconst previewButtonA11yHint =\n\t\tpostType === 'page'\n\t\t\t? __( 'Double tap to preview page.' )\n\t\t\t: __( 'Double tap to preview post.' );\n\tconst previewButtonText =\n\t\tpostType === 'page' ? __( 'Preview page' ) : __( 'Preview post' );\n\tconst comingSoonDescription =\n\t\tpostType === 'page'\n\t\t\t? sprintf(\n\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t__(\n\t\t\t\t\t\t'We’re working hard on adding support for %s previews. In the meantime, you can preview the embedded content on the page.'\n\t\t\t\t\t),\n\t\t\t\t\tlabel\n\t\t\t  )\n\t\t\t: sprintf(\n\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t__(\n\t\t\t\t\t\t'We’re working hard on adding support for %s previews. In the meantime, you can preview the embedded content on the post.'\n\t\t\t\t\t),\n\t\t\t\t\tlabel\n\t\t\t  );\n\n\tfunction onOpenSheet() {\n\t\tsetIsSheetVisible( true );\n\t}\n\n\tfunction onCloseSheet() {\n\t\tsetIsSheetVisible( false );\n\t}\n\n\tfunction onDismissSheet() {\n\t\t// The preview request has to be done after the bottom sheet modal is dismissed,\n\t\t// otherwise the preview native modal is not displayed.\n\t\tif ( shouldRequestReview.current ) {\n\t\t\trequestPreview();\n\t\t}\n\t\tshouldRequestReview.current = false;\n\t}\n\n\tfunction onPressContainer() {\n\t\tonPress();\n\t\tonOpenSheet();\n\t}\n\n\tfunction onPressHelp() {\n\t\tonPressContainer();\n\t}\n\n\tconst embedNoProviderPreview = (\n\t\t<>\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\taccessibilityHint={ previewButtonA11yHint }\n\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\tonPress={ onPressContainer }\n\t\t\t>\n\t\t\t\t<View style={ containerStyle }>\n\t\t\t\t\t<BlockIcon icon={ icon } />\n\t\t\t\t\t<Text style={ labelStyle }>{ label }</Text>\n\t\t\t\t\t<Text style={ descriptionStyle }>\n\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t\t\t__( '%s previews not yet available' ),\n\t\t\t\t\t\t\tlabel\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Text style={ styles.embed__action }>\n\t\t\t\t\t\t{ previewButtonText.toUpperCase() }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\taccessibilityHint={ __( 'Tap here to show help' ) }\n\t\t\t\t\t\taccessibilityLabel={ __( 'Help button' ) }\n\t\t\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\tonPress={ onPressHelp }\n\t\t\t\t\t\tstyle={ helpIconStyle }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticon={ help }\n\t\t\t\t\t\t\tfill={ helpIconStyle.fill }\n\t\t\t\t\t\t\tsize={ helpIconStyle.width }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t\t<BottomSheet\n\t\t\t\tisVisible={ isSheetVisible }\n\t\t\t\thideHeader\n\t\t\t\tonDismiss={ onDismissSheet }\n\t\t\t\tonClose={ onCloseSheet }\n\t\t\t\ttestID=\"embed-no-preview-modal\"\n\t\t\t>\n\t\t\t\t<View style={ styles[ 'embed-no-preview__container' ] }>\n\t\t\t\t\t<View style={ sheetIconStyle }>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticon={ help }\n\t\t\t\t\t\t\tfill={ sheetIconStyle.fill }\n\t\t\t\t\t\t\tsize={ sheetIconStyle.width }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t\t<Text style={ sheetTitleStyle }>\n\t\t\t\t\t\t{ isDefaultEmbedInfo\n\t\t\t\t\t\t\t? __( 'Embed block previews are coming soon' )\n\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t\t'%s embed block previews are coming soon'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tlabel\n\t\t\t\t\t\t\t  ) }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Text style={ sheetDescriptionStyle }>\n\t\t\t\t\t\t{ comingSoonDescription }\n\t\t\t\t\t</Text>\n\t\t\t\t</View>\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={ previewButtonText }\n\t\t\t\t\tseparatorType=\"topFullWidth\"\n\t\t\t\t\tonPress={ () => {\n\t\t\t\t\t\tshouldRequestReview.current = true;\n\t\t\t\t\t\tonCloseSheet();\n\t\t\t\t\t} }\n\t\t\t\t\tlabelStyle={ sheetButtonStyle }\n\t\t\t\t/>\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={ __( 'Dismiss' ) }\n\t\t\t\t\tseparatorType=\"topFullWidth\"\n\t\t\t\t\tonPress={ onCloseSheet }\n\t\t\t\t\tlabelStyle={ sheetButtonStyle }\n\t\t\t\t/>\n\t\t\t</BottomSheet>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ previewable ? (\n\t\t\t\tembedNoProviderPreview\n\t\t\t) : (\n\t\t\t\t<View style={ containerStyle }>\n\t\t\t\t\t<BlockIcon icon={ icon } />\n\t\t\t\t\t<Text style={ labelStyle }>\n\t\t\t\t\t\t{ __( 'No preview available' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nexport default EmbedNoPreview;\n"]}