{"version":3,"sources":["@wordpress/block-library/src/embed/embed-placeholder.native.js"],"names":["View","Text","TouchableWithoutFeedback","__","usePreferredColorSchemeStyle","Icon","Picker","BlockIcon","useRef","styles","noticeOutline","EmbedPlaceholder","icon","isSelected","label","onPress","cannotEmbed","fallback","tryAgain","openEmbedLinkSettings","containerStyle","embed__container","labelStyle","embed__label","descriptionStyle","embed__description","descriptionErrorStyle","actionStyle","embed__action","embedIconErrorStyle","cannotEmbedMenuPickerRef","errorPickerOptions","retry","id","value","onSelect","convertToLink","editLink","options","filter","Boolean","onPickerSelect","selectedItem","find","item","resolveOnPressEvent","current","presentPicker","fill"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { Icon, Picker } from '@wordpress/components';\nimport { BlockIcon } from '@wordpress/block-editor';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport styles from './styles.scss';\nimport { noticeOutline } from '../../../components/src/mobile/gridicons';\n\nconst EmbedPlaceholder = ( {\n\ticon,\n\tisSelected,\n\tlabel,\n\tonPress,\n\tcannotEmbed,\n\tfallback,\n\ttryAgain,\n\topenEmbedLinkSettings,\n} ) => {\n\tconst containerStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__container,\n\t\tstyles[ 'embed__container--dark' ]\n\t);\n\tconst labelStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__label,\n\t\tstyles[ 'embed__label--dark' ]\n\t);\n\tconst descriptionStyle = styles.embed__description;\n\tconst descriptionErrorStyle = styles[ 'embed__description--error' ];\n\tconst actionStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__action,\n\t\tstyles[ 'embed__action--dark' ]\n\t);\n\tconst embedIconErrorStyle = styles[ 'embed__icon--error' ];\n\n\tconst cannotEmbedMenuPickerRef = useRef();\n\n\tconst errorPickerOptions = {\n\t\tretry: {\n\t\t\tid: 'retryOption',\n\t\t\tlabel: __( 'Retry' ),\n\t\t\tvalue: 'retryOption',\n\t\t\tonSelect: tryAgain,\n\t\t},\n\t\tconvertToLink: {\n\t\t\tid: 'convertToLinkOption',\n\t\t\tlabel: __( 'Convert to link' ),\n\t\t\tvalue: 'convertToLinkOption',\n\t\t\tonSelect: fallback,\n\t\t},\n\t\teditLink: {\n\t\t\tid: 'editLinkOption',\n\t\t\tlabel: __( 'Edit link' ),\n\t\t\tvalue: 'editLinkOption',\n\t\t\tonSelect: openEmbedLinkSettings,\n\t\t},\n\t};\n\n\tconst options = [\n\t\tcannotEmbed && errorPickerOptions.retry,\n\t\tcannotEmbed && errorPickerOptions.convertToLink,\n\t\tcannotEmbed && errorPickerOptions.editLink,\n\t].filter( Boolean );\n\n\tfunction onPickerSelect( value ) {\n\t\tconst selectedItem = options.find( ( item ) => item.value === value );\n\t\tselectedItem.onSelect();\n\t}\n\n\t// When the content cannot be embedded the onPress should trigger the Picker instead of the onPress prop.\n\tfunction resolveOnPressEvent() {\n\t\tif ( cannotEmbed ) {\n\t\t\tcannotEmbedMenuPickerRef.current?.presentPicker();\n\t\t} else {\n\t\t\tonPress();\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\taccessibilityHint={\n\t\t\t\t\tcannotEmbed\n\t\t\t\t\t\t? __( 'Double tap to view embed options.' )\n\t\t\t\t\t\t: __( 'Double tap to add a link.' )\n\t\t\t\t}\n\t\t\t\tonPress={ resolveOnPressEvent }\n\t\t\t\tdisabled={ ! isSelected }\n\t\t\t>\n\t\t\t\t<View style={ containerStyle }>\n\t\t\t\t\t{ cannotEmbed ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ noticeOutline }\n\t\t\t\t\t\t\t\tfill={ embedIconErrorStyle.fill }\n\t\t\t\t\t\t\t\tstyle={ embedIconErrorStyle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\t\tdescriptionStyle,\n\t\t\t\t\t\t\t\t\tdescriptionErrorStyle,\n\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Unable to embed media' ) }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t<Text style={ actionStyle }>\n\t\t\t\t\t\t\t\t{ __( 'More options' ) }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t<Picker\n\t\t\t\t\t\t\t\ttitle={ __( 'Embed options' ) }\n\t\t\t\t\t\t\t\tref={ cannotEmbedMenuPickerRef }\n\t\t\t\t\t\t\t\toptions={ options }\n\t\t\t\t\t\t\t\tonChange={ onPickerSelect }\n\t\t\t\t\t\t\t\thideCancelButton\n\t\t\t\t\t\t\t\tleftAlign\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<BlockIcon icon={ icon } />\n\t\t\t\t\t\t\t<Text style={ labelStyle }>{ label }</Text>\n\t\t\t\t\t\t\t<Text style={ actionStyle }>\n\t\t\t\t\t\t\t\t{ __( 'ADD LINK' ) }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t</>\n\t);\n};\n\nexport default EmbedPlaceholder;\n"]}