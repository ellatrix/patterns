{"version":3,"sources":["@wordpress/block-library/src/list-item/hooks/use-copy.js"],"names":["useRefEffect","store","blockEditorStore","useSelect","useCopy","clientId","getBlockRootClientId","getBlockName","getBlockAttributes","node","onCopy","event","clipboardData","getData","rootClientId","setData","JSON","stringify","addEventListener","removeEventListener"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAT,QAA6B,oBAA7B;AACA,SAASC,KAAK,IAAIC,gBAAlB,QAA0C,yBAA1C;AACA,SAASC,SAAT,QAA0B,iBAA1B;AAEA,eAAe,SAASC,OAAT,CAAkBC,QAAlB,EAA6B;AAC3C,QAAM;AAAEC,IAAAA,oBAAF;AAAwBC,IAAAA,YAAxB;AAAsCC,IAAAA;AAAtC,MACLL,SAAS,CAAED,gBAAF,CADV;AAGA,SAAOF,YAAY,CAAIS,IAAF,IAAY;AAChC,aAASC,MAAT,CAAiBC,KAAjB,EAAyB;AACxB;AACA;AACA,UAAKA,KAAK,CAACC,aAAN,CAAoBC,OAApB,CAA6B,4BAA7B,CAAL,EAAmE;AAClE;AACA;;AAED,YAAMC,YAAY,GAAGR,oBAAoB,CAAED,QAAF,CAAzC;AACAM,MAAAA,KAAK,CAACC,aAAN,CAAoBG,OAApB,CACC,4BADD,EAECR,YAAY,CAAEO,YAAF,CAFb;AAIAH,MAAAA,KAAK,CAACC,aAAN,CAAoBG,OAApB,CACC,kCADD,EAECC,IAAI,CAACC,SAAL,CAAgBT,kBAAkB,CAAEM,YAAF,CAAlC,CAFD;AAIA;;AAEDL,IAAAA,IAAI,CAACS,gBAAL,CAAuB,MAAvB,EAA+BR,MAA/B;AACAD,IAAAA,IAAI,CAACS,gBAAL,CAAuB,KAAvB,EAA8BR,MAA9B;AACA,WAAO,MAAM;AACZD,MAAAA,IAAI,CAACU,mBAAL,CAA0B,MAA1B,EAAkCT,MAAlC;AACAD,MAAAA,IAAI,CAACU,mBAAL,CAA0B,KAA1B,EAAiCT,MAAjC;AACA,KAHD;AAIA,GAzBkB,EAyBhB,EAzBgB,CAAnB;AA0BA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { useSelect } from '@wordpress/data';\n\nexport default function useCopy( clientId ) {\n\tconst { getBlockRootClientId, getBlockName, getBlockAttributes } =\n\t\tuseSelect( blockEditorStore );\n\n\treturn useRefEffect( ( node ) => {\n\t\tfunction onCopy( event ) {\n\t\t\t// The event propagates through all nested lists, so don't override\n\t\t\t// when copying nested list items.\n\t\t\tif ( event.clipboardData.getData( '__unstableWrapperBlockName' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\t\t\tevent.clipboardData.setData(\n\t\t\t\t'__unstableWrapperBlockName',\n\t\t\t\tgetBlockName( rootClientId )\n\t\t\t);\n\t\t\tevent.clipboardData.setData(\n\t\t\t\t'__unstableWrapperBlockAttributes',\n\t\t\t\tJSON.stringify( getBlockAttributes( rootClientId ) )\n\t\t\t);\n\t\t}\n\n\t\tnode.addEventListener( 'copy', onCopy );\n\t\tnode.addEventListener( 'cut', onCopy );\n\t\treturn () => {\n\t\t\tnode.removeEventListener( 'copy', onCopy );\n\t\t\tnode.removeEventListener( 'cut', onCopy );\n\t\t};\n\t}, [] );\n}\n"]}