{"version":3,"sources":["@wordpress/block-library/src/list-item/hooks/use-split.js"],"names":["useCallback","useRef","useSelect","store","blockEditorStore","cloneBlock","createBlock","useSplit","clientId","isAfter","getBlock","value","block","current","content","name","attributes"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAT,EAAsBC,MAAtB,QAAoC,oBAApC;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,SAASC,KAAK,IAAIC,gBAAlB,QAA0C,yBAA1C;AACA,SAASC,UAAT,EAAqBC,WAArB,QAAwC,mBAAxC;AAEA,eAAe,SAASC,QAAT,CAAmBC,QAAnB,EAA8B;AAC5C;AACA;AACA;AACA;AACA;AACA,QAAMC,OAAO,GAAGR,MAAM,CAAE,KAAF,CAAtB;AACA,QAAM;AAAES,IAAAA;AAAF,MAAeR,SAAS,CAAEE,gBAAF,CAA9B;AACA,SAAOJ,WAAW,CACfW,KAAF,IAAa;AACZ,UAAMC,KAAK,GAAGF,QAAQ,CAAEF,QAAF,CAAtB;;AACA,QAAKC,OAAO,CAACI,OAAb,EAAuB;AACtB,aAAOR,UAAU,CAAEO,KAAF,EAAS;AACzBE,QAAAA,OAAO,EAAEH;AADgB,OAAT,CAAjB;AAGA;;AACDF,IAAAA,OAAO,CAACI,OAAR,GAAkB,IAAlB;AACA,WAAOP,WAAW,CAAEM,KAAK,CAACG,IAAR,EAAc,EAC/B,GAAGH,KAAK,CAACI,UADsB;AAE/BF,MAAAA,OAAO,EAAEH;AAFsB,KAAd,CAAlB;AAIA,GAbgB,EAcjB,CAAEH,QAAF,EAAYE,QAAZ,CAdiB,CAAlB;AAgBA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useCallback, useRef } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { cloneBlock, createBlock } from '@wordpress/blocks';\n\nexport default function useSplit( clientId ) {\n\t// We can not rely on the isAfterOriginal parameter of the callback,\n\t// because if the value after the split is empty isAfterOriginal is false\n\t// while the value is in fact after the original. So to avoid that issue we use\n\t// a flag where the first execution of the callback is false (it is the before value)\n\t// and the second execution is true, it is the after value.\n\tconst isAfter = useRef( false );\n\tconst { getBlock } = useSelect( blockEditorStore );\n\treturn useCallback(\n\t\t( value ) => {\n\t\t\tconst block = getBlock( clientId );\n\t\t\tif ( isAfter.current ) {\n\t\t\t\treturn cloneBlock( block, {\n\t\t\t\t\tcontent: value,\n\t\t\t\t} );\n\t\t\t}\n\t\t\tisAfter.current = true;\n\t\t\treturn createBlock( block.name, {\n\t\t\t\t...block.attributes,\n\t\t\t\tcontent: value,\n\t\t\t} );\n\t\t},\n\t\t[ clientId, getBlock ]\n\t);\n}\n"]}