{"version":3,"sources":["@wordpress/block-library/src/media-text/transforms.js"],"names":["createBlock","transforms","from","type","blocks","transform","alt","url","id","anchor","mediaAlt","mediaId","mediaUrl","mediaType","src","innerBlocks","align","backgroundType","customGradient","customOverlayColor","gradient","overlayColor","additionalAttributes","style","color","background","backgroundColor","to","isMatch","focalPoint","textColor","coverAttributes","dimRatio","customTextColor","text","coloredInnerBlocks","map","innerBlock","attributes","innerStyle","newAttributes","name"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/image' ],\n\t\t\ttransform: ( { alt, url, id, anchor } ) =>\n\t\t\t\tcreateBlock( 'core/media-text', {\n\t\t\t\t\tmediaAlt: alt,\n\t\t\t\t\tmediaId: id,\n\t\t\t\t\tmediaUrl: url,\n\t\t\t\t\tmediaType: 'image',\n\t\t\t\t\tanchor,\n\t\t\t\t} ),\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/video' ],\n\t\t\ttransform: ( { src, id, anchor } ) =>\n\t\t\t\tcreateBlock( 'core/media-text', {\n\t\t\t\t\tmediaId: id,\n\t\t\t\t\tmediaUrl: src,\n\t\t\t\t\tmediaType: 'video',\n\t\t\t\t\tanchor,\n\t\t\t\t} ),\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/cover' ],\n\t\t\ttransform: (\n\t\t\t\t{\n\t\t\t\t\talign,\n\t\t\t\t\talt,\n\t\t\t\t\tanchor,\n\t\t\t\t\tbackgroundType,\n\t\t\t\t\tcustomGradient,\n\t\t\t\t\tcustomOverlayColor,\n\t\t\t\t\tgradient,\n\t\t\t\t\tid,\n\t\t\t\t\toverlayColor,\n\t\t\t\t\turl,\n\t\t\t\t},\n\t\t\t\tinnerBlocks\n\t\t\t) => {\n\t\t\t\tlet additionalAttributes = {};\n\n\t\t\t\tif ( customGradient ) {\n\t\t\t\t\tadditionalAttributes = {\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t\tgradient: customGradient,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} else if ( customOverlayColor ) {\n\t\t\t\t\tadditionalAttributes = {\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t\tbackground: customOverlayColor,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn createBlock(\n\t\t\t\t\t'core/media-text',\n\t\t\t\t\t{\n\t\t\t\t\t\talign,\n\t\t\t\t\t\tanchor,\n\t\t\t\t\t\tbackgroundColor: overlayColor,\n\t\t\t\t\t\tgradient,\n\t\t\t\t\t\tmediaAlt: alt,\n\t\t\t\t\t\tmediaId: id,\n\t\t\t\t\t\tmediaType: backgroundType,\n\t\t\t\t\t\tmediaUrl: url,\n\t\t\t\t\t\t...additionalAttributes,\n\t\t\t\t\t},\n\t\t\t\t\tinnerBlocks\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t],\n\tto: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/image' ],\n\t\t\tisMatch: ( { mediaType, mediaUrl } ) => {\n\t\t\t\treturn ! mediaUrl || mediaType === 'image';\n\t\t\t},\n\t\t\ttransform: ( { mediaAlt, mediaId, mediaUrl, anchor } ) => {\n\t\t\t\treturn createBlock( 'core/image', {\n\t\t\t\t\talt: mediaAlt,\n\t\t\t\t\tid: mediaId,\n\t\t\t\t\turl: mediaUrl,\n\t\t\t\t\tanchor,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/video' ],\n\t\t\tisMatch: ( { mediaType, mediaUrl } ) => {\n\t\t\t\treturn ! mediaUrl || mediaType === 'video';\n\t\t\t},\n\t\t\ttransform: ( { mediaId, mediaUrl, anchor } ) => {\n\t\t\t\treturn createBlock( 'core/video', {\n\t\t\t\t\tid: mediaId,\n\t\t\t\t\tsrc: mediaUrl,\n\t\t\t\t\tanchor,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/cover' ],\n\t\t\ttransform: (\n\t\t\t\t{\n\t\t\t\t\talign,\n\t\t\t\t\tanchor,\n\t\t\t\t\tbackgroundColor,\n\t\t\t\t\tfocalPoint,\n\t\t\t\t\tgradient,\n\t\t\t\t\tmediaAlt,\n\t\t\t\t\tmediaId,\n\t\t\t\t\tmediaType,\n\t\t\t\t\tmediaUrl,\n\t\t\t\t\tstyle,\n\t\t\t\t\ttextColor,\n\t\t\t\t},\n\t\t\t\tinnerBlocks\n\t\t\t) => {\n\t\t\t\tconst additionalAttributes = {};\n\n\t\t\t\tif ( style?.color?.gradient ) {\n\t\t\t\t\tadditionalAttributes.customGradient = style.color.gradient;\n\t\t\t\t} else if ( style?.color?.background ) {\n\t\t\t\t\tadditionalAttributes.customOverlayColor =\n\t\t\t\t\t\tstyle.color.background;\n\t\t\t\t}\n\n\t\t\t\tconst coverAttributes = {\n\t\t\t\t\talign,\n\t\t\t\t\talt: mediaAlt,\n\t\t\t\t\tanchor,\n\t\t\t\t\tbackgroundType: mediaType,\n\t\t\t\t\tdimRatio: !! mediaUrl ? 50 : 100,\n\t\t\t\t\tfocalPoint,\n\t\t\t\t\tgradient,\n\t\t\t\t\tid: mediaId,\n\t\t\t\t\toverlayColor: backgroundColor,\n\t\t\t\t\turl: mediaUrl,\n\t\t\t\t\t...additionalAttributes,\n\t\t\t\t};\n\t\t\t\tconst customTextColor = style?.color?.text;\n\n\t\t\t\t// Attempt to maintain any text color selection.\n\t\t\t\t// Cover block's do not opt into color block support so we\n\t\t\t\t// cannot directly copy the color attributes across.\n\t\t\t\tif ( ! textColor && ! customTextColor ) {\n\t\t\t\t\treturn createBlock(\n\t\t\t\t\t\t'core/cover',\n\t\t\t\t\t\tcoverAttributes,\n\t\t\t\t\t\tinnerBlocks\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst coloredInnerBlocks = innerBlocks.map( ( innerBlock ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tattributes: { style: innerStyle },\n\t\t\t\t\t} = innerBlock;\n\n\t\t\t\t\t// Only apply the media and text color if the inner block\n\t\t\t\t\t// doesn't set its own color block support selection.\n\t\t\t\t\tif (\n\t\t\t\t\t\tinnerBlock.attributes.textColor ||\n\t\t\t\t\t\tinnerStyle?.color?.text\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn innerBlock;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst newAttributes = { textColor };\n\n\t\t\t\t\t// Only add or extend inner block's style object if we have\n\t\t\t\t\t// a custom text color from the media & text block.\n\t\t\t\t\tif ( customTextColor ) {\n\t\t\t\t\t\tnewAttributes.style = {\n\t\t\t\t\t\t\t...innerStyle,\n\t\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t\t...innerStyle?.color,\n\t\t\t\t\t\t\t\ttext: customTextColor,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn createBlock(\n\t\t\t\t\t\tinnerBlock.name,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...innerBlock.attributes,\n\t\t\t\t\t\t\t...newAttributes,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinnerBlock.innerBlocks\n\t\t\t\t\t);\n\t\t\t\t} );\n\n\t\t\t\treturn createBlock(\n\t\t\t\t\t'core/cover',\n\t\t\t\t\tcoverAttributes,\n\t\t\t\t\tcoloredInnerBlocks\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"]}