{"version":3,"sources":["@wordpress/block-library/src/navigation/use-template-part-area-label.js"],"names":["store","blockEditorStore","coreStore","useSelect","createTemplatePartId","useTemplatePartAreaLabel","clientId","select","getBlock","getBlockParentsByBlockName","withAscendingResults","parentTemplatePartClientIds","length","definedAreas","__experimentalGetDefaultTemplatePartAreas","getEditedEntityRecord","templatePartClientId","templatePartBlock","theme","slug","attributes","templatePartEntityId","templatePartEntity","area","find","definedArea","label"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,KAAK,IAAIC,gBAAlB,QAA0C,yBAA1C;AACA,SAASD,KAAK,IAAIE,SAAlB,QAAmC,sBAAnC;AACA,SAASC,SAAT,QAA0B,iBAA1B;AAEA;AACA;AACA;AAEA;;AACA,SAASC,oBAAT,QAAqC,qDAArC;AAEA,eAAe,SAASC,wBAAT,CAAmCC,QAAnC,EAA8C;AAC5D,SAAOH,SAAS,CACbI,MAAF,IAAc;AACb;AACA;AACA,QAAK,CAAED,QAAP,EAAkB;AACjB;AACA;;AAED,UAAM;AAAEE,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QACLF,MAAM,CAAEN,gBAAF,CADP;AAGA,UAAMS,oBAAoB,GAAG,IAA7B;AACA,UAAMC,2BAA2B,GAAGF,0BAA0B,CAC7DH,QAD6D,EAE7D,oBAF6D,EAG7DI,oBAH6D,CAA9D;;AAMA,QAAK,EAAEC,2BAAF,aAAEA,2BAAF,eAAEA,2BAA2B,CAAEC,MAA/B,CAAL,EAA6C;AAC5C;AACA,KAnBY,CAqBb;AACA;AACA;AACA;;AACA;;;AACA,UAAMC,YAAY,GACjBN,MAAM,CACL,aADK,CAAN,CAEEO,yCAFF,EADD;AAIA;;;AACA,UAAM;AAAEC,MAAAA;AAAF,QAA4BR,MAAM,CAAEL,SAAF,CAAxC;;AAEA,SAAM,MAAMc,oBAAZ,IAAoCL,2BAApC,EAAkE;AACjE,YAAMM,iBAAiB,GAAGT,QAAQ,CAAEQ,oBAAF,CAAlC,CADiE,CAGjE;AACA;;AACA,YAAM;AAAEE,QAAAA,KAAF;AAASC,QAAAA;AAAT,UAAkBF,iBAAiB,CAACG,UAA1C;AACA,YAAMC,oBAAoB,GAAGjB,oBAAoB,CAChDc,KADgD,EAEhDC,IAFgD,CAAjD;AAIA,YAAMG,kBAAkB,GAAGP,qBAAqB,CAC/C,UAD+C,EAE/C,kBAF+C,EAG/CM,oBAH+C,CAAhD,CAViE,CAgBjE;AACA;;AACA,UAAKC,kBAAL,aAAKA,kBAAL,eAAKA,kBAAkB,CAAEC,IAAzB,EAAgC;AAAA;;AAC/B,qCAAOV,YAAY,CAACW,IAAb,CACJC,WAAF,IACCA,WAAW,CAACF,IAAZ,KAAqB,eAArB,IACAE,WAAW,CAACF,IAAZ,KAAqBD,kBAAkB,CAACC,IAHnC,CAAP,uDAAO,mBAIJG,KAJH;AAKA;AACD;AACD,GA5Dc,EA6Df,CAAEpB,QAAF,CA7De,CAAhB;AA+DA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\n\n// TODO: this util should perhaps be refactored somewhere like core-data.\nimport { createTemplatePartId } from '../template-part/edit/utils/create-template-part-id';\n\nexport default function useTemplatePartAreaLabel( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\t// Use the lack of a clientId as an opportunity to bypass the rest\n\t\t\t// of this hook.\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { getBlock, getBlockParentsByBlockName } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\tconst withAscendingResults = true;\n\t\t\tconst parentTemplatePartClientIds = getBlockParentsByBlockName(\n\t\t\t\tclientId,\n\t\t\t\t'core/template-part',\n\t\t\t\twithAscendingResults\n\t\t\t);\n\n\t\t\tif ( ! parentTemplatePartClientIds?.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// FIXME: @wordpress/block-library should not depend on @wordpress/editor.\n\t\t\t// Blocks can be loaded into a *non-post* block editor.\n\t\t\t// This code is lifted from this file:\n\t\t\t// packages/block-library/src/template-part/edit/advanced-controls.js\n\t\t\t/* eslint-disable @wordpress/data-no-store-string-literals */\n\t\t\tconst definedAreas =\n\t\t\t\tselect(\n\t\t\t\t\t'core/editor'\n\t\t\t\t).__experimentalGetDefaultTemplatePartAreas();\n\t\t\t/* eslint-enable @wordpress/data-no-store-string-literals */\n\t\t\tconst { getEditedEntityRecord } = select( coreStore );\n\n\t\t\tfor ( const templatePartClientId of parentTemplatePartClientIds ) {\n\t\t\t\tconst templatePartBlock = getBlock( templatePartClientId );\n\n\t\t\t\t// The 'area' usually isn't stored on the block, but instead\n\t\t\t\t// on the entity.\n\t\t\t\tconst { theme, slug } = templatePartBlock.attributes;\n\t\t\t\tconst templatePartEntityId = createTemplatePartId(\n\t\t\t\t\ttheme,\n\t\t\t\t\tslug\n\t\t\t\t);\n\t\t\t\tconst templatePartEntity = getEditedEntityRecord(\n\t\t\t\t\t'postType',\n\t\t\t\t\t'wp_template_part',\n\t\t\t\t\ttemplatePartEntityId\n\t\t\t\t);\n\n\t\t\t\t// Look up the `label` for the area in the defined areas so\n\t\t\t\t// that an internationalized label can be used.\n\t\t\t\tif ( templatePartEntity?.area ) {\n\t\t\t\t\treturn definedAreas.find(\n\t\t\t\t\t\t( definedArea ) =>\n\t\t\t\t\t\t\tdefinedArea.area !== 'uncategorized' &&\n\t\t\t\t\t\t\tdefinedArea.area === templatePartEntity.area\n\t\t\t\t\t)?.label;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n"]}