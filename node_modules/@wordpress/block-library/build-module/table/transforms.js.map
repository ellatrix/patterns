{"version":3,"sources":["@wordpress/block-library/src/table/transforms.js"],"names":["createBlock","normalizeRowColSpan","tableContentPasteSchema","phrasingContentSchema","tr","allowEmpty","children","th","attributes","td","tablePasteSchema","args","table","thead","tfoot","tbody","transforms","from","type","selector","schema","transform","node","Array","reduce","sectionAcc","section","length","sectionName","nodeName","toLowerCase","slice","sectionAttributes","rowAcc","row","rowAttributes","colAcc","col","rowspan","getAttribute","colspan","push","tag","content","innerHTML","cells"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { normalizeRowColSpan } from './utils';\n\nconst tableContentPasteSchema = ( { phrasingContentSchema } ) => ( {\n\ttr: {\n\t\tallowEmpty: true,\n\t\tchildren: {\n\t\t\tth: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: phrasingContentSchema,\n\t\t\t\tattributes: [ 'scope', 'colspan', 'rowspan' ],\n\t\t\t},\n\t\t\ttd: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: phrasingContentSchema,\n\t\t\t\tattributes: [ 'colspan', 'rowspan' ],\n\t\t\t},\n\t\t},\n\t},\n} );\n\nconst tablePasteSchema = ( args ) => ( {\n\ttable: {\n\t\tchildren: {\n\t\t\tthead: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: tableContentPasteSchema( args ),\n\t\t\t},\n\t\t\ttfoot: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: tableContentPasteSchema( args ),\n\t\t\t},\n\t\t\ttbody: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: tableContentPasteSchema( args ),\n\t\t\t},\n\t\t},\n\t},\n} );\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'raw',\n\t\t\tselector: 'table',\n\t\t\tschema: tablePasteSchema,\n\t\t\ttransform: ( node ) => {\n\t\t\t\tconst attributes = Array.from( node.children ).reduce(\n\t\t\t\t\t( sectionAcc, section ) => {\n\t\t\t\t\t\tif ( ! section.children.length ) {\n\t\t\t\t\t\t\treturn sectionAcc;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst sectionName = section.nodeName\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.slice( 1 );\n\n\t\t\t\t\t\tconst sectionAttributes = Array.from(\n\t\t\t\t\t\t\tsection.children\n\t\t\t\t\t\t).reduce( ( rowAcc, row ) => {\n\t\t\t\t\t\t\tif ( ! row.children.length ) {\n\t\t\t\t\t\t\t\treturn rowAcc;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst rowAttributes = Array.from(\n\t\t\t\t\t\t\t\trow.children\n\t\t\t\t\t\t\t).reduce( ( colAcc, col ) => {\n\t\t\t\t\t\t\t\tconst rowspan = normalizeRowColSpan(\n\t\t\t\t\t\t\t\t\tcol.getAttribute( 'rowspan' )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tconst colspan = normalizeRowColSpan(\n\t\t\t\t\t\t\t\t\tcol.getAttribute( 'colspan' )\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tcolAcc.push( {\n\t\t\t\t\t\t\t\t\ttag: col.nodeName.toLowerCase(),\n\t\t\t\t\t\t\t\t\tcontent: col.innerHTML,\n\t\t\t\t\t\t\t\t\trowspan,\n\t\t\t\t\t\t\t\t\tcolspan,\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\treturn colAcc;\n\t\t\t\t\t\t\t}, [] );\n\n\t\t\t\t\t\t\trowAcc.push( {\n\t\t\t\t\t\t\t\tcells: rowAttributes,\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\treturn rowAcc;\n\t\t\t\t\t\t}, [] );\n\n\t\t\t\t\t\tsectionAcc[ sectionName ] = sectionAttributes;\n\t\t\t\t\t\treturn sectionAcc;\n\t\t\t\t\t},\n\t\t\t\t\t{}\n\t\t\t\t);\n\n\t\t\t\treturn createBlock( 'core/table', attributes );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"]}