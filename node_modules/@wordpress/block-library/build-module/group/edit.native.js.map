{"version":3,"sources":["@wordpress/block-library/src/group/edit.native.js"],"names":["View","withSelect","compose","withPreferredColorScheme","useResizeObserver","InnerBlocks","store","blockEditorStore","useCallback","alignmentHelpers","styles","isFullWidth","GroupEdit","attributes","hasInnerBlocks","isSelected","isLastInnerBlockSelected","getStylesFromColorScheme","style","blockWidth","align","resizeObserver","sizes","width","renderAppender","groupAppender","fullwidthGroupAppender","fullwidthHasInnerGroupAppender","groupPlaceholder","groupPlaceholderDark","marginVerticalDense","marginHorizontalNone","innerBlocks","backgroundColor","hasBackgroundAppender","select","clientId","getBlock","getBlockIndex","hasSelectedInnerBlock","getBlockRootClientId","getSelectedBlockClientId","getBlockAttributes","block","length","isInnerBlockSelected","selectedBlockClientId","totalInnerBlocks","blockIndex","parentId","parentBlockAlignment"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport {\n\tcompose,\n\twithPreferredColorScheme,\n\tuseResizeObserver,\n} from '@wordpress/compose';\nimport {\n\tInnerBlocks,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useCallback } from '@wordpress/element';\nimport { alignmentHelpers } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport styles from './editor.scss';\n\nconst { isFullWidth } = alignmentHelpers;\n\nfunction GroupEdit( {\n\tattributes,\n\thasInnerBlocks,\n\tisSelected,\n\tisLastInnerBlockSelected,\n\tgetStylesFromColorScheme,\n\tstyle,\n\tblockWidth,\n} ) {\n\tconst { align } = attributes;\n\tconst [ resizeObserver, sizes ] = useResizeObserver();\n\tconst { width } = sizes || { width: 0 };\n\n\tconst renderAppender = useCallback(\n\t\t() => (\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\t! hasInnerBlocks && styles.groupAppender,\n\t\t\t\t\tisFullWidth( align ) &&\n\t\t\t\t\t\t! hasInnerBlocks &&\n\t\t\t\t\t\tstyles.fullwidthGroupAppender,\n\t\t\t\t\tisFullWidth( align ) &&\n\t\t\t\t\t\thasInnerBlocks &&\n\t\t\t\t\t\tstyles.fullwidthHasInnerGroupAppender,\n\t\t\t\t] }\n\t\t\t>\n\t\t\t\t<InnerBlocks.ButtonBlockAppender />\n\t\t\t</View>\n\t\t),\n\t\t[ align, hasInnerBlocks ]\n\t);\n\n\tif ( ! isSelected && ! hasInnerBlocks ) {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\tgetStylesFromColorScheme(\n\t\t\t\t\t\tstyles.groupPlaceholder,\n\t\t\t\t\t\tstyles.groupPlaceholderDark\n\t\t\t\t\t),\n\t\t\t\t\t! hasInnerBlocks && {\n\t\t\t\t\t\t...styles.marginVerticalDense,\n\t\t\t\t\t\t...styles.marginHorizontalNone,\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<View\n\t\t\tstyle={ [\n\t\t\t\tisSelected && hasInnerBlocks && styles.innerBlocks,\n\t\t\t\tstyle,\n\t\t\t\tisSelected &&\n\t\t\t\t\thasInnerBlocks &&\n\t\t\t\t\tstyle?.backgroundColor &&\n\t\t\t\t\tstyles.hasBackgroundAppender,\n\t\t\t\tisLastInnerBlockSelected &&\n\t\t\t\t\tstyle?.backgroundColor &&\n\t\t\t\t\tstyles.isLastInnerBlockSelected,\n\t\t\t] }\n\t\t>\n\t\t\t{ resizeObserver }\n\t\t\t<InnerBlocks\n\t\t\t\trenderAppender={ isSelected && renderAppender }\n\t\t\t\tparentWidth={ width }\n\t\t\t\tblockWidth={ blockWidth }\n\t\t\t/>\n\t\t</View>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlock,\n\t\t\tgetBlockIndex,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlockAttributes,\n\t\t} = select( blockEditorStore );\n\n\t\tconst block = getBlock( clientId );\n\t\tconst hasInnerBlocks = !! ( block && block.innerBlocks.length );\n\t\tconst isInnerBlockSelected =\n\t\t\thasInnerBlocks && hasSelectedInnerBlock( clientId, true );\n\t\tlet isLastInnerBlockSelected = false;\n\n\t\tif ( isInnerBlockSelected ) {\n\t\t\tconst { innerBlocks } = block;\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\tconst totalInnerBlocks = innerBlocks.length - 1;\n\t\t\tconst blockIndex = getBlockIndex( selectedBlockClientId );\n\t\t\tisLastInnerBlockSelected = totalInnerBlocks === blockIndex;\n\t\t}\n\n\t\tconst parentId = getBlockRootClientId( clientId );\n\t\tconst parentBlockAlignment = getBlockAttributes( parentId )?.align;\n\n\t\treturn {\n\t\t\thasInnerBlocks,\n\t\t\tisLastInnerBlockSelected,\n\t\t\tparentBlockAlignment,\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( GroupEdit );\n"]}