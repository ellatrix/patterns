{"version":3,"sources":["@wordpress/block-library/src/social-links/edit.native.js"],"names":["View","InnerBlocks","store","blockEditorStore","withDispatch","withSelect","useRef","useEffect","useState","compose","usePreferredColorSchemeStyle","styles","variations","ALLOWED_BLOCKS","map","v","name","TEMPLATE","service","url","SocialLinksEdit","shouldDelete","onDelete","isSelected","isInnerIconSelected","innerBlocks","attributes","activeInnerBlocks","getBlock","blockWidth","initialCreation","setInitialCreation","shouldRenderFooterAppender","align","marginLeft","spacing","renderFooterAppender","placeholderStyle","placeholder","placeholderDark","renderPlaceholder","Array","length","_","index","filterInnerBlocks","blockIds","filter","blockId","placeholderWrapper","current","undefined","select","clientId","getBlockCount","getBlockParents","getSelectedBlockClientId","getBlocks","selectedBlockClientId","selectedBlockParents","block","dispatch","removeBlock"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n/**\n * WordPress dependencies\n */\nimport {\n\tInnerBlocks,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { compose, usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './editor.scss';\nimport variations from '../social-link/variations';\n\nconst ALLOWED_BLOCKS = variations.map(\n\t( v ) => `core/social-link-${ v.name }`\n);\n\n// Template contains the links that show when start.\nconst TEMPLATE = [\n\t[\n\t\t'core/social-link-wordpress',\n\t\t{ service: 'wordpress', url: 'https://wordpress.org' },\n\t],\n\t[ 'core/social-link-facebook', { service: 'facebook' } ],\n\t[ 'core/social-link-twitter', { service: 'twitter' } ],\n\t[ 'core/social-link-instagram', { service: 'instagram' } ],\n];\n\nfunction SocialLinksEdit( {\n\tshouldDelete,\n\tonDelete,\n\tisSelected,\n\tisInnerIconSelected,\n\tinnerBlocks,\n\tattributes,\n\tactiveInnerBlocks,\n\tgetBlock,\n\tblockWidth,\n} ) {\n\tconst [ initialCreation, setInitialCreation ] = useState( true );\n\tconst shouldRenderFooterAppender = isSelected || isInnerIconSelected;\n\tconst { align } = attributes;\n\tconst { marginLeft: spacing } = styles.spacing;\n\n\tuseEffect( () => {\n\t\tif ( ! shouldRenderFooterAppender ) {\n\t\t\tsetInitialCreation( false );\n\t\t}\n\t}, [ shouldRenderFooterAppender ] );\n\n\tconst renderFooterAppender = useRef( () => (\n\t\t<View>\n\t\t\t<InnerBlocks.ButtonBlockAppender isFloating={ true } />\n\t\t</View>\n\t) );\n\n\tconst placeholderStyle = usePreferredColorSchemeStyle(\n\t\tstyles.placeholder,\n\t\tstyles.placeholderDark\n\t);\n\n\tfunction renderPlaceholder() {\n\t\treturn [ ...new Array( innerBlocks.length || 1 ) ].map(\n\t\t\t( _, index ) => (\n\t\t\t\t<View\n\t\t\t\t\ttestID=\"social-links-placeholder\"\n\t\t\t\t\tstyle={ placeholderStyle }\n\t\t\t\t\tkey={ index }\n\t\t\t\t/>\n\t\t\t)\n\t\t);\n\t}\n\n\tfunction filterInnerBlocks( blockIds ) {\n\t\treturn blockIds.filter(\n\t\t\t( blockId ) => getBlock( blockId ).attributes.url\n\t\t);\n\t}\n\n\tif ( ! shouldRenderFooterAppender && activeInnerBlocks.length === 0 ) {\n\t\treturn (\n\t\t\t<View style={ styles.placeholderWrapper }>\n\t\t\t\t{ renderPlaceholder() }\n\t\t\t</View>\n\t\t);\n\t}\n\n\treturn (\n\t\t<InnerBlocks\n\t\t\tallowedBlocks={ ALLOWED_BLOCKS }\n\t\t\ttemplateLock={ false }\n\t\t\ttemplate={ initialCreation && TEMPLATE }\n\t\t\trenderFooterAppender={\n\t\t\t\tshouldRenderFooterAppender && renderFooterAppender.current\n\t\t\t}\n\t\t\torientation={ 'horizontal' }\n\t\t\tonDeleteBlock={ shouldDelete ? onDelete : undefined }\n\t\t\tmarginVertical={ spacing }\n\t\t\tmarginHorizontal={ spacing }\n\t\t\thorizontalAlignment={ align }\n\t\t\tfilterInnerBlocks={\n\t\t\t\t! shouldRenderFooterAppender && filterInnerBlocks\n\t\t\t}\n\t\t\tblockWidth={ blockWidth }\n\t\t/>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlockCount,\n\t\t\tgetBlockParents,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlocks,\n\t\t\tgetBlock,\n\t\t} = select( blockEditorStore );\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst selectedBlockParents = getBlockParents(\n\t\t\tselectedBlockClientId,\n\t\t\ttrue\n\t\t);\n\t\tconst innerBlocks = getBlocks( clientId );\n\t\tconst activeInnerBlocks = innerBlocks.filter(\n\t\t\t( block ) => block.attributes?.url\n\t\t);\n\n\t\treturn {\n\t\t\tshouldDelete: getBlockCount( clientId ) === 1,\n\t\t\tisInnerIconSelected: selectedBlockParents[ 0 ] === clientId,\n\t\t\tinnerBlocks,\n\t\t\tactiveInnerBlocks,\n\t\t\tgetBlock,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\tconst { removeBlock } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\tonDelete: () => {\n\t\t\t\tremoveBlock( clientId, false );\n\t\t\t},\n\t\t};\n\t} )\n)( SocialLinksEdit );\n"]}