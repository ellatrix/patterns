{"version":3,"sources":["@wordpress/block-library/src/freeform/edit.js"],"names":["BlockControls","useBlockProps","store","blockEditorStore","debounce","useRefEffect","useSelect","ToolbarGroup","useEffect","useRef","useState","__","BACKSPACE","DELETE","F10","isKeyboardEvent","ConvertToBlocksButton","ModalEdit","wp","window","isTmceEmpty","editor","body","getBody","childNodes","length","test","innerText","textContent","FreeformEdit","props","clientId","canRemove","select","canRemoveBlock","isIframed","setIsIframed","ref","element","ownerDocument","document","ClassicEdit","attributes","content","setAttributes","onReplace","getMultiSelectedBlockClientIds","didMount","current","tinymce","get","currentContent","getContent","setContent","baseURL","suffix","wpEditorL10n","EditorManager","overrideDefaults","base_url","onSetup","bookmark","on","selection","getBookmark","scrollContainer","querySelector","scrollPosition","scrollTop","once","moveToBookmark","debouncedOnChange","value","_lastChange","cancel","event","primary","stopPropagation","keyCode","preventDefault","stopImmediatePropagation","altKey","rootNode","activeElement","blur","focus","initialize","settings","oldEditor","inline","content_css","fixed_toolbar_container","setup","onReadyStateChange","readyState","addEventListener","removeEventListener","remove","onToolbarKeyDown","nativeEvent"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tBlockControls,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { debounce, useRefEffect } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { ToolbarGroup } from '@wordpress/components';\nimport { useEffect, useRef, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { BACKSPACE, DELETE, F10, isKeyboardEvent } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport ConvertToBlocksButton from './convert-to-blocks-button';\nimport ModalEdit from './modal';\n\nconst { wp } = window;\n\nfunction isTmceEmpty( editor ) {\n\t// When tinyMce is empty the content seems to be:\n\t// <p><br data-mce-bogus=\"1\"></p>\n\t// avoid expensive checks for large documents\n\tconst body = editor.getBody();\n\tif ( body.childNodes.length > 1 ) {\n\t\treturn false;\n\t} else if ( body.childNodes.length === 0 ) {\n\t\treturn true;\n\t}\n\tif ( body.childNodes[ 0 ].childNodes.length > 1 ) {\n\t\treturn false;\n\t}\n\treturn /^\\n?$/.test( body.innerText || body.textContent );\n}\n\nexport default function FreeformEdit( props ) {\n\tconst { clientId } = props;\n\tconst canRemove = useSelect(\n\t\t( select ) => select( blockEditorStore ).canRemoveBlock( clientId ),\n\t\t[ clientId ]\n\t);\n\tconst [ isIframed, setIsIframed ] = useState( false );\n\tconst ref = useRefEffect( ( element ) => {\n\t\tsetIsIframed( element.ownerDocument !== document );\n\t}, [] );\n\n\treturn (\n\t\t<>\n\t\t\t{ canRemove && (\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t<ConvertToBlocksButton clientId={ clientId } />\n\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t</BlockControls>\n\t\t\t) }\n\t\t\t<div { ...useBlockProps( { ref } ) }>\n\t\t\t\t{ isIframed ? (\n\t\t\t\t\t<ModalEdit { ...props } />\n\t\t\t\t) : (\n\t\t\t\t\t<ClassicEdit { ...props } />\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nfunction ClassicEdit( {\n\tclientId,\n\tattributes: { content },\n\tsetAttributes,\n\tonReplace,\n} ) {\n\tconst { getMultiSelectedBlockClientIds } = useSelect( blockEditorStore );\n\tconst didMount = useRef( false );\n\n\tuseEffect( () => {\n\t\tif ( ! didMount.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst editor = window.tinymce.get( `editor-${ clientId }` );\n\t\tconst currentContent = editor?.getContent();\n\n\t\tif ( currentContent !== content ) {\n\t\t\teditor.setContent( content || '' );\n\t\t}\n\t}, [ content ] );\n\n\tuseEffect( () => {\n\t\tconst { baseURL, suffix } = window.wpEditorL10n.tinymce;\n\n\t\tdidMount.current = true;\n\n\t\twindow.tinymce.EditorManager.overrideDefaults( {\n\t\t\tbase_url: baseURL,\n\t\t\tsuffix,\n\t\t} );\n\n\t\tfunction onSetup( editor ) {\n\t\t\tlet bookmark;\n\n\t\t\tif ( content ) {\n\t\t\t\teditor.on( 'loadContent', () => editor.setContent( content ) );\n\t\t\t}\n\n\t\t\teditor.on( 'blur', () => {\n\t\t\t\tbookmark = editor.selection.getBookmark( 2, true );\n\t\t\t\t// There is an issue with Chrome and the editor.focus call in core at https://core.trac.wordpress.org/browser/trunk/src/js/_enqueues/lib/link.js#L451.\n\t\t\t\t// This causes a scroll to the top of editor content on return from some content updating dialogs so tracking\n\t\t\t\t// scroll position until this is fixed in core.\n\t\t\t\tconst scrollContainer = document.querySelector(\n\t\t\t\t\t'.interface-interface-skeleton__content'\n\t\t\t\t);\n\t\t\t\tconst scrollPosition = scrollContainer.scrollTop;\n\n\t\t\t\t// Only update attributes if we aren't multi-selecting blocks.\n\t\t\t\t// Updating during multi-selection can overwrite attributes of other blocks.\n\t\t\t\tif ( ! getMultiSelectedBlockClientIds()?.length ) {\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tcontent: editor.getContent(),\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\teditor.once( 'focus', () => {\n\t\t\t\t\tif ( bookmark ) {\n\t\t\t\t\t\teditor.selection.moveToBookmark( bookmark );\n\t\t\t\t\t\tif ( scrollContainer.scrollTop !== scrollPosition ) {\n\t\t\t\t\t\t\tscrollContainer.scrollTop = scrollPosition;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\teditor.on( 'mousedown touchstart', () => {\n\t\t\t\tbookmark = null;\n\t\t\t} );\n\n\t\t\tconst debouncedOnChange = debounce( () => {\n\t\t\t\tconst value = editor.getContent();\n\n\t\t\t\tif ( value !== editor._lastChange ) {\n\t\t\t\t\teditor._lastChange = value;\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tcontent: value,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}, 250 );\n\t\t\teditor.on( 'Paste Change input Undo Redo', debouncedOnChange );\n\n\t\t\t// We need to cancel the debounce call because when we remove\n\t\t\t// the editor (onUnmount) this callback is executed in\n\t\t\t// another tick. This results in setting the content to empty.\n\t\t\teditor.on( 'remove', debouncedOnChange.cancel );\n\n\t\t\teditor.on( 'keydown', ( event ) => {\n\t\t\t\tif ( isKeyboardEvent.primary( event, 'z' ) ) {\n\t\t\t\t\t// Prevent the gutenberg undo kicking in so TinyMCE undo stack works as expected.\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t( event.keyCode === BACKSPACE ||\n\t\t\t\t\t\tevent.keyCode === DELETE ) &&\n\t\t\t\t\tisTmceEmpty( editor )\n\t\t\t\t) {\n\t\t\t\t\t// Delete the block.\n\t\t\t\t\tonReplace( [] );\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t}\n\n\t\t\t\tconst { altKey } = event;\n\t\t\t\t/*\n\t\t\t\t * Prevent Mousetrap from kicking in: TinyMCE already uses its own\n\t\t\t\t * `alt+f10` shortcut to focus its toolbar.\n\t\t\t\t */\n\t\t\t\tif ( altKey && event.keyCode === F10 ) {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\teditor.on( 'init', () => {\n\t\t\t\tconst rootNode = editor.getBody();\n\n\t\t\t\t// Create the toolbar by refocussing the editor.\n\t\t\t\tif ( rootNode.ownerDocument.activeElement === rootNode ) {\n\t\t\t\t\trootNode.blur();\n\t\t\t\t\teditor.focus();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction initialize() {\n\t\t\tconst { settings } = window.wpEditorL10n.tinymce;\n\t\t\twp.oldEditor.initialize( `editor-${ clientId }`, {\n\t\t\t\ttinymce: {\n\t\t\t\t\t...settings,\n\t\t\t\t\tinline: true,\n\t\t\t\t\tcontent_css: false,\n\t\t\t\t\tfixed_toolbar_container: `#toolbar-${ clientId }`,\n\t\t\t\t\tsetup: onSetup,\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\n\t\tfunction onReadyStateChange() {\n\t\t\tif ( document.readyState === 'complete' ) {\n\t\t\t\tinitialize();\n\t\t\t}\n\t\t}\n\n\t\tif ( document.readyState === 'complete' ) {\n\t\t\tinitialize();\n\t\t} else {\n\t\t\tdocument.addEventListener( 'readystatechange', onReadyStateChange );\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\n\t\t\t\t'readystatechange',\n\t\t\t\tonReadyStateChange\n\t\t\t);\n\t\t\twp.oldEditor.remove( `editor-${ clientId }` );\n\t\t};\n\t}, [] );\n\n\tfunction focus() {\n\t\tconst editor = window.tinymce.get( `editor-${ clientId }` );\n\t\tif ( editor ) {\n\t\t\teditor.focus();\n\t\t}\n\t}\n\n\tfunction onToolbarKeyDown( event ) {\n\t\t// Prevent WritingFlow from kicking in and allow arrows navigation on the toolbar.\n\t\tevent.stopPropagation();\n\t\t// Prevent Mousetrap from moving focus to the top toolbar when pressing `alt+f10` on this block toolbar.\n\t\tevent.nativeEvent.stopImmediatePropagation();\n\t}\n\n\t// Disable reasons:\n\t//\n\t// jsx-a11y/no-static-element-interactions\n\t//  - the toolbar itself is non-interactive, but must capture events\n\t//    from the KeyboardShortcuts component to stop their propagation.\n\n\t/* eslint-disable jsx-a11y/no-static-element-interactions */\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tkey=\"toolbar\"\n\t\t\t\tid={ `toolbar-${ clientId }` }\n\t\t\t\tclassName=\"block-library-classic__toolbar\"\n\t\t\t\tonClick={ focus }\n\t\t\t\tdata-placeholder={ __( 'Classic' ) }\n\t\t\t\tonKeyDown={ onToolbarKeyDown }\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tkey=\"editor\"\n\t\t\t\tid={ `editor-${ clientId }` }\n\t\t\t\tclassName=\"wp-block-freeform block-library-rich-text__tinymce\"\n\t\t\t/>\n\t\t</>\n\t);\n\t/* eslint-enable jsx-a11y/no-static-element-interactions */\n}\n"]}