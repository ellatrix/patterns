{"version":3,"sources":["@wordpress/blocks/src/api/children.js"],"names":["renderToString","deprecated","node","getSerializeCapableElement","children","getChildrenArray","since","version","link","concat","alternative","result","blockNodes","i","length","blockNode","Array","isArray","j","child","canConcatToPreviousString","push","fromDOM","domNodes","error","toHTML","element","matcher","selector","domNode","match","querySelector","childNodes"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { renderToString } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport * as node from './node';\n\n/**\n * A representation of a block's rich text value.\n *\n * @typedef {WPBlockNode[]} WPBlockChildren\n */\n\n/**\n * Given block children, returns a serialize-capable WordPress element.\n *\n * @param {WPBlockChildren} children Block children object to convert.\n *\n * @return {WPElement} A serialize-capable element.\n */\nexport function getSerializeCapableElement( children ) {\n\t// The fact that block children are compatible with the element serializer is\n\t// merely an implementation detail that currently serves to be true, but\n\t// should not be mistaken as being a guarantee on the external API. The\n\t// public API only offers guarantees to work with strings (toHTML) and DOM\n\t// elements (fromDOM), and should provide utilities to manipulate the value\n\t// rather than expect consumers to inspect or construct its shape (concat).\n\treturn children;\n}\n\n/**\n * Given block children, returns an array of block nodes.\n *\n * @param {WPBlockChildren} children Block children object to convert.\n *\n * @return {Array<WPBlockNode>} An array of individual block nodes.\n */\nfunction getChildrenArray( children ) {\n\tdeprecated( 'wp.blocks.children.getChildrenArray', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t} );\n\n\t// The fact that block children are compatible with the element serializer\n\t// is merely an implementation detail that currently serves to be true, but\n\t// should not be mistaken as being a guarantee on the external API.\n\treturn children;\n}\n\n/**\n * Given two or more block nodes, returns a new block node representing a\n * concatenation of its values.\n *\n * @param {...WPBlockChildren} blockNodes Block nodes to concatenate.\n *\n * @return {WPBlockChildren} Concatenated block node.\n */\nexport function concat( ...blockNodes ) {\n\tdeprecated( 'wp.blocks.children.concat', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t\talternative: 'wp.richText.concat',\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t} );\n\n\tconst result = [];\n\tfor ( let i = 0; i < blockNodes.length; i++ ) {\n\t\tconst blockNode = Array.isArray( blockNodes[ i ] )\n\t\t\t? blockNodes[ i ]\n\t\t\t: [ blockNodes[ i ] ];\n\t\tfor ( let j = 0; j < blockNode.length; j++ ) {\n\t\t\tconst child = blockNode[ j ];\n\t\t\tconst canConcatToPreviousString =\n\t\t\t\ttypeof child === 'string' &&\n\t\t\t\ttypeof result[ result.length - 1 ] === 'string';\n\n\t\t\tif ( canConcatToPreviousString ) {\n\t\t\t\tresult[ result.length - 1 ] += child;\n\t\t\t} else {\n\t\t\t\tresult.push( child );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Given an iterable set of DOM nodes, returns equivalent block children.\n * Ignores any non-element/text nodes included in set.\n *\n * @param {Iterable.<Node>} domNodes Iterable set of DOM nodes to convert.\n *\n * @return {WPBlockChildren} Block children equivalent to DOM nodes.\n */\nexport function fromDOM( domNodes ) {\n\tdeprecated( 'wp.blocks.children.fromDOM', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t\talternative: 'wp.richText.create',\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t} );\n\n\tconst result = [];\n\tfor ( let i = 0; i < domNodes.length; i++ ) {\n\t\ttry {\n\t\t\tresult.push( node.fromDOM( domNodes[ i ] ) );\n\t\t} catch ( error ) {\n\t\t\t// Simply ignore if DOM node could not be converted.\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Given a block node, returns its HTML string representation.\n *\n * @param {WPBlockChildren} children Block node(s) to convert to string.\n *\n * @return {string} String HTML representation of block node.\n */\nexport function toHTML( children ) {\n\tdeprecated( 'wp.blocks.children.toHTML', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t\talternative: 'wp.richText.toHTMLString',\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t} );\n\n\tconst element = getSerializeCapableElement( children );\n\n\treturn renderToString( element );\n}\n\n/**\n * Given a selector, returns an hpq matcher generating a WPBlockChildren value\n * matching the selector result.\n *\n * @param {string} selector DOM selector.\n *\n * @return {Function} hpq matcher.\n */\nexport function matcher( selector ) {\n\tdeprecated( 'wp.blocks.children.matcher', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t\talternative: 'html source',\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t} );\n\n\treturn ( domNode ) => {\n\t\tlet match = domNode;\n\n\t\tif ( selector ) {\n\t\t\tmatch = domNode.querySelector( selector );\n\t\t}\n\n\t\tif ( match ) {\n\t\t\treturn fromDOM( match.childNodes );\n\t\t}\n\n\t\treturn [];\n\t};\n}\n\n/**\n * Object of utility functions used in managing block attribute values of\n * source `children`.\n *\n * @see https://github.com/WordPress/gutenberg/pull/10439\n *\n * @deprecated since 4.0. The `children` source should not be used, and can be\n *             replaced by the `html` source.\n *\n * @private\n */\nexport default {\n\tconcat,\n\tgetChildrenArray,\n\tfromDOM,\n\ttoHTML,\n\tmatcher,\n};\n"]}